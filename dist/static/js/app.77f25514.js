(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,a){e.exports=a("56d7")},"02ee":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-upload-container"},[a("div",{staticClass:"info-upload-card"},[e._m(0),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px",size:"medium"}},[a("el-row",[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"身高/m",prop:"height"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"体重/kg",prop:"weight"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血糖",prop:"bloodSugar"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.bloodSugar,callback:function(t){e.$set(e.form,"bloodSugar",t)},expression:"form.bloodSugar"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血压",prop:"bloodPressure"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.bloodPressure,callback:function(t){e.$set(e.form,"bloodPressure",t)},expression:"form.bloodPressure"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"胆固醇",prop:"bloodLipid"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.bloodLipid,callback:function(t){e.$set(e.form,"bloodLipid",t)},expression:"form.bloodLipid"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"心率/BPM",prop:"heartRate"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.heartRate,callback:function(t){e.$set(e.form,"heartRate",t)},expression:"form.heartRate"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"视力/d",prop:"vision"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.vision,callback:function(t){e.$set(e.form,"vision",t)},expression:"form.vision"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠时长/h",prop:"sleepDuration"}},[a("el-input-number",{attrs:{min:0,step:.1},model:{value:e.form.sleepDuration,callback:function(t){e.$set(e.form,"sleepDuration",t)},expression:"form.sleepDuration"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠质量",prop:"sleepQuality"}},[a("el-radio-group",{model:{value:e.form.sleepQuality,callback:function(t){e.$set(e.form,"sleepQuality",t)},expression:"form.sleepQuality"}},[a("el-radio",{attrs:{label:"好"}},[e._v("好")]),a("el-radio",{attrs:{label:"一般"}},[e._v("一般")]),a("el-radio",{attrs:{label:"差"}},[e._v("差")])],1)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"是否吸烟",prop:"smoking"}},[a("el-switch",{model:{value:e.form.smoking,callback:function(t){e.$set(e.form,"smoking",t)},expression:"form.smoking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"是否饮酒",prop:"drinking"}},[a("el-switch",{model:{value:e.form.drinking,callback:function(t){e.$set(e.form,"drinking",t)},expression:"form.drinking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"是否运动",prop:"exercise"}},[a("el-switch",{model:{value:e.form.exercise,callback:function(t){e.$set(e.form,"exercise",t)},expression:"form.exercise"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"喜好的食物种类",prop:"foodTypes"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.foodTypes,callback:function(t){e.$set(e.form,"foodTypes",t)},expression:"form.foodTypes"}},[a("el-option",{attrs:{label:"蔬菜",value:"蔬菜"}}),a("el-option",{attrs:{label:"水果",value:"水果"}}),a("el-option",{attrs:{label:"肉类",value:"肉类"}}),a("el-option",{attrs:{label:"鱼类",value:"鱼类"}}),a("el-option",{attrs:{label:"豆类",value:"豆类"}}),a("el-option",{attrs:{label:"谷物",value:"谷物"}})],1)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"饮水量/ml",prop:"waterConsumption"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.waterConsumption,callback:function(t){e.$set(e.form,"waterConsumption",t)},expression:"form.waterConsumption"}})],1)],1)],1),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-user"}),a("span",[e._v("基本信息")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},scopedSlots:e._u([{key:"prefix",fn:function(){return[a("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input-number",{attrs:{min:0,max:120,"controls-position":"right"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)],1)],1)],1),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-line"}),a("span",[e._v("身体指标")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"身高",prop:"height"}},[a("el-input-number",{attrs:{min:0,max:3,step:.01,precision:2,"controls-position":"right"},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}}),a("span",{staticClass:"unit"},[e._v("m")])],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"体重",prop:"weight"}},[a("el-input-number",{attrs:{min:0,max:500,step:.1,precision:1,"controls-position":"right"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),a("span",{staticClass:"unit"},[e._v("kg")])],1)],1)],1)],1),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-first-aid-kit"}),a("span",[e._v("生理指标")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血糖",prop:"bloodSugar"}},[a("el-input-number",{attrs:{min:0,step:.1,precision:1,"controls-position":"right"},model:{value:e.form.bloodSugar,callback:function(t){e.$set(e.form,"bloodSugar",t)},expression:"form.bloodSugar"}}),a("span",{staticClass:"unit"},[e._v("mmol/L")])],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血压",prop:"bloodPressure"}},[a("el-input-number",{attrs:{min:0,step:1,"controls-position":"right"},model:{value:e.form.bloodPressure,callback:function(t){e.$set(e.form,"bloodPressure",t)},expression:"form.bloodPressure"}}),a("span",{staticClass:"unit"},[e._v("mmHg")])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"胆固醇",prop:"bloodLipid"}},[a("el-input-number",{attrs:{min:0,step:.1,precision:1,"controls-position":"right"},model:{value:e.form.bloodLipid,callback:function(t){e.$set(e.form,"bloodLipid",t)},expression:"form.bloodLipid"}}),a("span",{staticClass:"unit"},[e._v("mmol/L")])],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"心率",prop:"heartRate"}},[a("el-input-number",{attrs:{min:0,max:250,"controls-position":"right"},model:{value:e.form.heartRate,callback:function(t){e.$set(e.form,"heartRate",t)},expression:"form.heartRate"}}),a("span",{staticClass:"unit"},[e._v("BPM")])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"视力",prop:"vision"}},[a("el-input-number",{attrs:{min:0,step:.1,precision:1,"controls-position":"right"},model:{value:e.form.vision,callback:function(t){e.$set(e.form,"vision",t)},expression:"form.vision"}}),a("span",{staticClass:"unit"},[e._v("度")])],1)],1)],1)],1),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-s-operation"}),a("span",[e._v("生活习惯")])]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠时长",prop:"sleepDuration"}},[a("el-input-number",{attrs:{min:0,max:24,step:.5,precision:1,"controls-position":"right"},model:{value:e.form.sleepDuration,callback:function(t){e.$set(e.form,"sleepDuration",t)},expression:"form.sleepDuration"}}),a("span",{staticClass:"unit"},[e._v("h")])],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠质量",prop:"sleepQuality"}},[a("el-radio-group",{model:{value:e.form.sleepQuality,callback:function(t){e.$set(e.form,"sleepQuality",t)},expression:"form.sleepQuality"}},[a("el-radio",{attrs:{label:"好"}},[e._v("好")]),a("el-radio",{attrs:{label:"一般"}},[e._v("一般")]),a("el-radio",{attrs:{label:"差"}},[e._v("差")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"饮水量",prop:"waterConsumption"}},[a("el-input-number",{attrs:{min:0,step:100,"controls-position":"right"},model:{value:e.form.waterConsumption,callback:function(t){e.$set(e.form,"waterConsumption",t)},expression:"form.waterConsumption"}}),a("span",{staticClass:"unit"},[e._v("ml")])],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"食物偏好",prop:"foodTypes"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.foodTypes,callback:function(t){e.$set(e.form,"foodTypes",t)},expression:"form.foodTypes"}},[a("el-option",{attrs:{label:"均衡",value:"均衡"}}),a("el-option",{attrs:{label:"蔬菜",value:"蔬菜"}}),a("el-option",{attrs:{label:"水果",value:"水果"}}),a("el-option",{attrs:{label:"肉类",value:"肉类"}}),a("el-option",{attrs:{label:"鱼类",value:"鱼类"}}),a("el-option",{attrs:{label:"豆类",value:"豆类"}}),a("el-option",{attrs:{label:"谷物",value:"谷物"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否吸烟",prop:"smoking"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"是","inactive-text":"否"},model:{value:e.form.smoking,callback:function(t){e.$set(e.form,"smoking",t)},expression:"form.smoking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否饮酒",prop:"drinking"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"是","inactive-text":"否"},model:{value:e.form.drinking,callback:function(t){e.$set(e.form,"drinking",t)},expression:"form.drinking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否运动",prop:"exercise"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.exercise,callback:function(t){e.$set(e.form,"exercise",t)},expression:"form.exercise"}})],1)],1)],1)],1),a("div",{staticClass:"form-actions"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("提交数据")]),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置表单")])],1)],1)],1)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("h1",{staticClass:"title"},[e._v("身体信息上传")]),a("p",{staticClass:"subtitle"},[e._v("请填写您的身体健康数据，以便生成个性化健康报告")])])}],r=a("c7eb"),o=a("1da1"),n=a("3835"),l=(a("d3b7"),a("3ca3"),a("ddb0"),a("3373")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{attrs:{type:"file"},on:{change:e.handleFileChange}}),e.imageUrl?a("img",{attrs:{src:e.imageUrl}}):e._e()])},d=[],u={name:"AvatarUpload",data:function(){return{imageUrl:null}},methods:{handleFileChange:function(e){var t=this,a=e.target.files[0],s=new FileReader;s.readAsDataURL(a),s.onload=function(){t.imageUrl=s.result}}},watch:{imageUrl:function(e){this.$emit("input",e)}}},p=u,m=(a("23dc1"),a("2877")),f=Object(m["a"])(p,c,d,!1,null,null,null),h=f.exports,b=a("70d8"),g={name:"InfoUpload",components:{AvatarUpload:h},data:function(){return{loading:!1,form:{id:null,name:"",age:null,gender:"",height:"",weight:"",bloodSugar:"",bloodPressure:"",bloodLipid:"",heartRate:null,vision:null,sleepDuration:null,sleepQuality:"",smoking:!1,drinking:!1,exercise:!1,foodTypes:"",waterConsumption:null},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",message:"年龄必须为数字值"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],height:[{required:!0,message:"请输入身高",trigger:"blur"},{type:"number",message:"身高必须为数字值"}],weight:[{required:!0,message:"请输入体重",trigger:"blur"},{type:"number",message:"体重必须为数字值"}],bloodSugar:[{required:!0,message:"请输入血糖",trigger:"blur"},{type:"number",message:"血糖必须为数字值"}],bloodPressure:[{required:!0,message:"请输入血压",trigger:"blur"},{type:"number",message:"血压必须为数字值"}],bloodLipid:[{required:!0,message:"请输入血脂",trigger:"blur"},{type:"number",message:"血脂必须为数字值"}],heartRate:[{required:!0,message:"请输入心率",trigger:"blur"},{type:"number",message:"心率必须为数字值"}],vision:[{required:!0,message:"请输入视力",trigger:"blur"},{type:"number",message:"视力必须为数字值"}],sleepQuality:[{required:!0,message:"请选择睡眠质量",trigger:"change"}],smoking:[{required:!0,message:"请选择是否吸烟",trigger:"change"}],drinking:[{required:!0,message:"请选择是否饮酒",trigger:"change"}],exercise:[{required:!0,message:"请选择是否运动",trigger:"change"}],foodTypes:[{required:!0,message:"请选择摄入较多的食物种类",trigger:"blur"}],waterConsumption:[{required:!0,message:"请输入饮水量",trigger:"blur"},{type:"number",message:"饮水量必须为数字值"}]}}},methods:{submitForm:function(){var e=this;this.form.id||(this.form.id=this.id),this.$refs.form.validate((function(t){if(!t)return e.$message({message:"请填写必要的信息",type:"warning"}),!1;e.loading=!0,Promise.all([l["a"].BodyInformation(e.form),l["a"].BodyInformationNotes(e.form)]).then((function(t){var a=Object(n["a"])(t,1);a[0];e.$notify({title:"成功",message:"身体信息上传成功！您现在可以查看健康评估报告了。",type:"success",duration:3e3}),setTimeout((function(){e.$router.push("/health/assessment")}),1500)})).catch((function(t){e.$notify({title:"错误",message:t.message||"上传数据失败，请稍后重试",type:"error",duration:3e3})})).finally((function(){e.loading=!1}))}))},resetForm:function(e){this.$refs[e].resetFields(),console.log(this.id),this.$message({message:"表单已重置",type:"info"})},getUserId:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].getUserId().then((function(t){t&&t.data&&(e.id=parseInt(t.data.id))}));case 2:case"end":return t.stop()}}),t)})))()}},created:function(){this.getUserId()}},v=g,y=(a("bd0d"),Object(m["a"])(v,s,i,!1,null,"5dc96a01",null));t["default"]=y.exports},"036d":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("99af");var s=a("83d6"),i=a.n(s),r=i.a.title||"健康管理系统";function o(e){return e?"".concat(e," - ").concat(r):"".concat(r)}},"040f":function(e,t,a){"use strict";a("0a9a")},"0891":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"knowledge-container"},[a("div",{staticClass:"knowledge-header"},[a("div",{staticClass:"header-content"},[a("h1",{staticClass:"main-title"},[e._v("健康知识库")]),a("p",{staticClass:"subtitle"},[e._v("发现适合你的运动和健康生活方式")]),a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索运动种类","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Search(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.Search},slot:"append"},[e._v("搜索")])],1)],1)])]),a("div",{staticClass:"knowledge-content"},[e.loading?e._e():a("div",{staticClass:"filter-bar"},[a("div",{staticClass:"result-count"},[a("span",{staticClass:"count-text"},[e.isFiltered?[e._v(" 找到 "),a("strong",[e._v(e._s(e.sportInfos.length))]),e._v(" 条相关运动知识 ")]:[e._v(" 共 "),a("strong",[e._v(e._s(e.sportInfos.length))]),e._v(" 种运动类型 ")]],2)]),a("div",{staticClass:"filter-actions"},[e.isFiltered?a("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v(" 重置搜索 ")]):e._e()],1)]),e.loading?a("div",{staticClass:"loading-state"},[a("el-skeleton",{attrs:{rows:6,animated:""}})],1):0===e.sportInfos.length?a("div",{staticClass:"empty-state"},[a("i",{staticClass:"el-icon-data-analysis empty-icon"}),a("h3",{staticClass:"empty-title"},[e._v("暂无相关运动知识")]),a("p",{staticClass:"empty-subtitle"},[e._v("请尝试使用其他关键词搜索，或查看所有运动类型")]),a("el-button",{attrs:{type:"primary"},on:{click:e.resetSearch}},[e._v("查看所有运动类型")])],1):a("div",{staticClass:"knowledge-grid"},e._l(e.sportInfos,(function(t,s){return a("div",{key:t.id,staticClass:"knowledge-card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v(e._s(t.sportType))]),a("span",{staticClass:"card-tag",class:e.getTagClass(s)},[e._v("运动")])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-time info-icon"}),a("div",{staticClass:"info-content"},[a("span",{staticClass:"info-label"},[e._v("适宜时间")]),a("span",{staticClass:"info-value"},[e._v(e._s(t.suitableTime))])])]),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-bangzhu info-icon"}),a("div",{staticClass:"info-content"},[a("span",{staticClass:"info-label"},[e._v("适宜心率")]),a("span",{staticClass:"info-value"},[e._v(e._s(t.suitableHeartRate))])])]),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-date info-icon"}),a("div",{staticClass:"info-content"},[a("span",{staticClass:"info-label"},[e._v("适宜频率")]),a("span",{staticClass:"info-value"},[e._v(e._s(t.suitableFrequency))])])]),a("div",{staticClass:"info-item"},[a("i",{staticClass:"el-icon-data-line info-icon"}),a("div",{staticClass:"info-content"},[a("span",{staticClass:"info-label"},[e._v("推荐速度")]),a("span",{staticClass:"info-value"},[e._v(e._s(t.recommendedSpeed))])])])]),a("div",{staticClass:"card-footer"},[a("el-button",{staticClass:"detail-button",attrs:{type:"primary",size:"small",icon:"el-icon-view"},on:{click:function(a){return e.goToDetail(t.sportType,t)}}},[e._v(" 查看详情 ")])],1)])})),0)]),a("DetailDialog",{attrs:{visible:e.detailDialogVisible,detailInfo:e.currentDetailInfo},on:{"update:visible":function(t){e.detailDialogVisible=t},close:function(t){e.detailDialogVisible=!1}}})],1)},i=[],r=a("2909"),o=a("c7eb"),n=a("1da1"),l=(a("4de4"),a("caad"),a("d81d"),a("fb6a"),a("d3b7"),a("2532"),a("498a"),a("3373")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"detail-dialog",attrs:{visible:e.visible,width:e.dialogWidth,"before-close":e.handleClose,top:"6vh","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"dialog-title"},[e._v(e._s(e.fullDetail.sportType||e.detailInfo.sportType||"运动详情"))])]},proxy:!0}])},[a("div",{staticClass:"knowledge-card detail-main-card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[a("i",{staticClass:"el-icon-time"}),e._v(" 适宜时间")]),a("span",{staticClass:"info-value"},[e._v(e._s(e.fullDetail.suitableTime||e.detailInfo.suitableTime||"暂无数据"))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[a("i",{staticClass:"el-icon-bangzhu"}),e._v(" 适宜心率")]),a("span",{staticClass:"info-value"},[e._v(e._s(e.fullDetail.suitableHeartRate||e.detailInfo.suitableHeartRate||"暂无数据"))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 适宜频率")]),a("span",{staticClass:"info-value"},[e._v(e._s(e.fullDetail.suitableFrequency||e.detailInfo.suitableFrequency||"暂无数据"))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[a("i",{staticClass:"el-icon-data-line"}),e._v(" 推荐速度")]),a("span",{staticClass:"info-value"},[e._v(e._s(e.fullDetail.recommendedSpeed||e.detailInfo.recommendedSpeed||"暂无数据"))])]),a("el-divider",{staticClass:"info-divider"}),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label label-danger"},[a("i",{staticClass:"el-icon-remove-outline"}),e._v(" 禁忌疾病")]),a("span",{staticClass:"info-value",domProps:{innerHTML:e._s((e.fullDetail.disease||e.detailInfo.disease||"暂无数据").replace(/；/g,"<br>"))}})]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label label-success"},[a("i",{staticClass:"el-icon-s-opportunity"}),e._v(" 方法介绍")]),a("span",{staticClass:"info-value",domProps:{innerHTML:e._s((e.fullDetail.method||e.detailInfo.method||"暂无数据").replace(/；/g,"<br>"))}})]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label label-warning"},[a("i",{staticClass:"el-icon-warning-outline"}),e._v(" 注意事项")]),a("span",{staticClass:"info-value",domProps:{innerHTML:e._s((e.fullDetail.notes||e.detailInfo.notes||"暂无数据").replace(/；/g,"<br>"))}})])],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("关闭")])],1)])},d=[],u=a("ade3"),p=a("5530"),m=Object(u["a"])(Object(u["a"])(Object(u["a"])({name:"DetailDialog",data:function(){return{dialogWidth:"90vw"}},props:{visible:{type:Boolean,required:!0},detailInfo:{type:Object,required:!0}}},"data",(function(){return{loading:!1,fullDetail:Object(p["a"])({},this.detailInfo)}})),"watch",{visible:function(e){e?this.fetchDetail():this.fullDetail=Object(p["a"])({},this.detailInfo)}}),"methods",{handleClose:function(){this.$emit("update:visible",!1),this.$emit("close")},fetchDetail:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.detailInfo&&e.detailInfo.sportType){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,l["a"].DetailInfo(e.detailInfo.sportType);case 6:a=t.sent,console.log("DetailInfo返回：",a),s={},a&&a.data&&(s=a.data.data?a.data.data:a.data),e.fullDetail=Object(p["a"])(Object(p["a"])({},e.detailInfo),s),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),e.$message.error("获取详情失败");case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})))()}}),f=m,h=(a("4d8f"),a("2877")),b=Object(h["a"])(f,c,d,!1,null,"3a8ac529",null),g=b.exports,v={data:function(){return{detailDialogVisible:!1,currentDetailInfo:{},loading:!0,searchText:"",sportInfos:[],DetailInfo:[],originalSportInfos:[],isFiltered:!1,tagColors:["success","warning","danger","info","primary"]}},created:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllSportInfo();case 2:case"end":return t.stop()}}),t)})))()},methods:{getTagClass:function(e){return this.tagColors[e%this.tagColors.length]},goToDetail:function(e,t){this.currentDetailInfo=t,this.detailDialogVisible=!0},resetSearch:function(){this.searchText="",this.sportInfos=Object(r["a"])(this.originalSportInfos),this.isFiltered=!1,this.$message({message:"已重置搜索结果",type:"info"})},fetchAllSportInfo:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,s,i,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,l["a"].getAllSportInfo();case 4:a=t.sent,s=a.data.sportInfos,i=s.slice(),n=i.map((function(e){return{id:e.id,sportType:e.sportType,suitableTime:e.suitableTime||"任意时间",suitableHeartRate:e.suitableHeartRate||"根据个人情况",suitableFrequency:e.suitableFrequency||"每周 3-5 次",recommendedSpeed:e.recommendedSpeed||"中等强度"}})),e.sportInfos=n,e.originalSportInfos=Object(r["a"])(n),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$notify({title:"加载失败",message:"无法获取运动知识数据，请刷新页面重试",type:"error",duration:0}),console.error(t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})))()},Search:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,s,i,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.searchText.trim()){t.next=3;break}return e.resetSearch(),t.abrupt("return");case 3:return e.loading=!0,t.prev=4,t.next=7,l["a"].getAllSportInfo();case 7:a=t.sent,s=a.data.sportInfos,i=s.filter((function(t){return t.sportType.toLowerCase().includes(e.searchText.toLowerCase())})),r=i.map((function(e){return{id:e.id,sportType:e.sportType,suitableTime:e.suitableTime||"任意时间",suitableHeartRate:e.suitableHeartRate||"根据个人情况",suitableFrequency:e.suitableFrequency||"每周 3-5 次",recommendedSpeed:e.recommendedSpeed||"中等强度"}})),e.sportInfos=r,e.isFiltered=!0,r.length>0?e.$message({message:"找到 ".concat(r.length," 条相关运动知识"),type:"success"}):e.$message({message:"没有找到相关运动知识",type:"warning"}),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),e.$message.error("搜索过程中出现错误，请重试"),console.error(t.t0);case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[4,16,20,23]])})))()}},components:{DetailDialog:g}},y=v,w=(a("4775"),Object(h["a"])(y,s,i,!1,null,"2f7f191c",null));t["default"]=w.exports},"0a9a":function(e,t,a){},"0c09":function(e,t,a){"use strict";a("dff6")},"0c99":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-container"},[a("el-form",{ref:"form",staticClass:"register-form",attrs:{model:e.form,rules:e.rules,"auto-complete":"on","label-position":"left"}},[a("el-row",{staticStyle:{"text-align":"center",width:"100%"},attrs:{gutter:24}},[a("el-col",{staticStyle:{display:"flex","align-items":"center"},attrs:{span:24}},[a("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"40px",color:"#409EFF","margin-right":"10px"}}),a("span",{staticStyle:{"font-size":"32px","font-weight":"600"}},[e._v("用户注册")])])],1),a("hr"),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名",name:"username",type:"text","auto-complete":"on"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[a("i",{staticClass:"el-icon-user",staticStyle:{"font-size":"20px",color:"grey"},attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码",name:"password","auto-complete":"on"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[a("i",{staticClass:"el-icon-lock",staticStyle:{"font-size":"20px",color:"grey"},attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"确认密码",name:"confirmPassword","auto-complete":"on"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}},[a("i",{staticClass:"el-icon-lock",staticStyle:{"font-size":"20px",color:"grey"},attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{type:"success"},on:{click:e.submitForm}},[e._v("注册新账号")]),a("div",[a("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.handleBackToLogin}},[e._v("返回登录")])],1)],1)],1)},i=[],r=a("70d8"),o={data:function(){return{form:{username:"",password:"",confirmPassword:"",email:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.validateConfirmPassword,trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;var a={username:e.form.username,password:e.form.password,email:e.form.email};r["a"].register(a).then((function(t){e.$message({message:t.message,type:"success"}),e.$router.push("/login")}))}))},validateConfirmPassword:function(e,t,a){t!==this.form.password?a(new Error("两次输入的密码不一致")):a()},handleBackToLogin:function(){this.$router.push("/login")}}},n=o,l=(a("656d"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"60b1f458",null);t["default"]=c.exports},"13d4":function(e,t,a){},"1add":function(e,t,a){},"1eb3":function(e,t,a){"use strict";a("b2c2")},"223d":function(e,t,a){"use strict";(function(e){var t=a("c7eb"),s=a("5530"),i=a("1da1"),r=(a("4de4"),a("b0c0"),a("d3b7"),a("a18c")),o=a("4360"),n=a("5c96"),l=a("323e"),c=a.n(l),d=(a("a5d8"),a("5f87")),u=a("036d"),p=a("c1f7");c.a.configure({showSpinner:!1});var m=["/login","/register","/change_Password"];function f(e){return e.filter((function(e){return"Layout"===e.component?e.component=p["a"]:e.component=a("feca")("./".concat(e.component,".vue")).default,e.children&&e.children.length&&(e.children=f(e.children)),!0})),e}r["a"].beforeEach(function(){var a=Object(i["a"])(Object(t["a"])().mark((function a(i,l,p){var h,b,g;return Object(t["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c.a.start(),document.title=Object(u["a"])(i.meta.title),h=Object(d["a"])(),!h){t.next=33;break}if("/login"!==i.path){t.next=9;break}p({path:"/"}),c.a.done(),t.next=31;break;case 9:if(b=o["a"].getters.name,!b){t.next=14;break}p(),t.next=31;break;case 14:return t.prev=14,t.next=17,o["a"].dispatch("user/getInfo");case 17:g=f(o["a"].getters.menuList),g.push({path:"*",redirect:"/404",hidden:!0}),r["a"].addRoutes(g),e.myRoutes=g,p(Object(s["a"])(Object(s["a"])({},i),{},{replace:!0})),t.next=31;break;case 24:return t.prev=24,t.t0=t["catch"](14),t.next=28,o["a"].dispatch("user/resetToken");case 28:n["Message"].error(t.t0||"Has Error"),p("/login?redirect=".concat(i.path)),c.a.done();case 31:t.next=34;break;case 33:-1!==m.indexOf(i.path)?p():(p("/login?redirect=".concat(i.path)),c.a.done());case 34:case"end":return t.stop()}}),a,null,[[14,24]])})));return function(e,t,s){return a.apply(this,arguments)}}()),r["a"].afterEach((function(){c.a.done()})),a("3f52")}).call(this,a("c8ba"))},"22a7":function(e,t,a){"use strict";a("7bdf")},"23dc1":function(e,t,a){"use strict";a("1add")},"26fc":function(e,t,a){e.exports=a.p+"static/img/404_cloud.0f4bc32b.png"},2850:function(e,t,a){},"2cad":function(e,t,a){},3373:function(e,t,a){"use strict";var s=a("b775");t["a"]={BodyInformation:function(e){return Object(s["a"])({url:"/user/BodyInformation",method:"post",data:e})},BodyInformationNotes:function(e){return Object(s["a"])({url:"/user/BodyInformationNotes",method:"post",data:e})},getAllSportInfo:function(){return Object(s["a"])({url:"/sport/getAllSportInfo",method:"get"})},DetailInfo:function(e){return Object(s["a"])({url:"/detail/DetailInfo/".concat(e),method:"get"})},getSportList:function(e){return Object(s["a"])({url:"/sport/getSportList",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,sportType:e.sportType}})},saveSport:function(e){return null==e.id&&void 0==e.id?this.addSport(e):this.updateSport(e)},addSport:function(e){return Object(s["a"])({url:"/sport/add",method:"post",data:e}).catch((function(e){throw console.log(e.response.data),e}))},updateSport:function(e){return Object(s["a"])({url:"/sport/update",method:"put",data:e})},getSportById:function(e){return Object(s["a"])({url:"/sport/".concat(e),method:"get"})},deleteSportById:function(e){return Object(s["a"])({url:"/sport/".concat(e),method:"delete"})},getBodyNotes:function(e){return Object(s["a"])({url:"/user/getBodyNotes/".concat(e),method:"get"})},getDetailList:function(e){return Object(s["a"])({url:"/detail/getDetailList",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,sportType:e.sportType}})},saveDetail:function(e){return null==e.id&&void 0==e.id?this.addDetail(e):this.updateDetail(e)},addDetail:function(e){return Object(s["a"])({url:"/detail/addDetail",method:"post",data:e}).catch((function(e){throw console.log(e.response.data),e}))},updateDetail:function(e){return Object(s["a"])({url:"/detail/updateDetail",method:"put",data:e})},getDetailById:function(e){return Object(s["a"])({url:"/detail/getDetailById/".concat(e),method:"get"})},deleteDetailById:function(e){return Object(s["a"])({url:"/detail/deleteDetailById/".concat(e),method:"delete"})}}},"38e2":function(e,t,a){},"3fbf":function(e,t,a){"use strict";a("afb2")},"409f":function(e,t,a){"use strict";a("7f37")},4360:function(e,t,a){"use strict";var s=a("2b0e"),i=a("2f62"),r=(a("b0c0"),{sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},menuList:function(e){return e.user.menuList},visitedViews:function(e){return e.tagsView.visitedViews},cachedViews:function(e){return e.tagsView.cachedViews},permission_routes:function(e){return e.permission.routes}}),o=r,n=a("a78e"),l=a.n(n),c={sidebar:{opened:!l.a.get("sidebarStatus")||!!+l.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop"},d={TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?l.a.set("sidebarStatus",1):l.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:function(e,t){l.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},u={toggleSideBar:function(e){var t=e.commit;t("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){var a=e.commit,s=t.withoutAnimation;a("CLOSE_SIDEBAR",s)},toggleDevice:function(e,t){var a=e.commit;a("TOGGLE_DEVICE",t)}},p={namespaced:!0,state:c,mutations:d,actions:u},m=a("83d6"),f=a.n(m),h=f.a.showSettings,b=f.a.fixedHeader,g=f.a.sidebarLogo,v={showSettings:h,fixedHeader:b,sidebarLogo:g},y={CHANGE_SETTING:function(e,t){var a=t.key,s=t.value;e.hasOwnProperty(a)&&(e[a]=s)}},w={changeSetting:function(e,t){var a=e.commit;a("CHANGE_SETTING",t)}},C={namespaced:!0,state:v,mutations:y,actions:w},x=(a("d3b7"),a("498a"),a("b775"));function _(e){return Object(x["a"])({url:"/user/login",method:"post",data:e})}function k(e){return Object(x["a"])({url:"/user/info",method:"get",params:{token:e}})}function S(){return Object(x["a"])({url:"/user/logout",method:"post"})}var I=a("5f87"),L=a("a18c"),O=function(){return{token:Object(I["a"])(),name:"",avatar:"",menuList:[]}},F=O(),$={RESET_STATE:function(e){Object.assign(e,O())},SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_MENU_LIST:function(e,t){e.menuList=t}},T={login:function(e,t){var a=e.commit,s=t.username,i=t.password;return new Promise((function(e,t){_({username:s.trim(),password:i}).then((function(t){var s=t.data;a("SET_TOKEN",s.token),Object(I["c"])(s.token),e()})).catch((function(e){t(e)}))}))},getInfo:function(e){var t=e.commit,a=e.state;return new Promise((function(e,s){k(a.token).then((function(a){var i=a.data;i||s("Verification failed, please Login again.");var r=i.name,o=i.avatar,n=i.menuList;t("SET_NAME",r),t("SET_AVATAR",o),t("SET_MENU_LIST",n),e(i)})).catch((function(e){s(e)}))}))},logout:function(e){var t=e.commit,a=e.state;return new Promise((function(e,s){S(a.token).then((function(){Object(I["b"])(),Object(L["b"])(),t("RESET_STATE"),e()})).catch((function(e){s(e)}))}))},resetToken:function(e){var t=e.commit;return new Promise((function(e){Object(I["b"])(),t("RESET_STATE"),e()}))}},j={namespaced:!0,state:F,mutations:$,actions:T},E=a("2909"),M=a("3835"),B=a("b85c"),D=(a("4de4"),a("caad"),a("fb6a"),a("a434"),a("2532"),a("ddb0"),{visitedViews:[],cachedViews:[]}),V={ADD_VISITED_VIEW:function(e,t){e.visitedViews.some((function(e){return e.path===t.path}))||e.visitedViews.push(Object.assign({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:function(e,t){e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:function(e,t){var a,s=Object(B["a"])(e.visitedViews.entries());try{for(s.s();!(a=s.n()).done;){var i=Object(M["a"])(a.value,2),r=i[0],o=i[1];if(o.path===t.path){e.visitedViews.splice(r,1);break}}}catch(n){s.e(n)}finally{s.f()}},DEL_CACHED_VIEW:function(e,t){var a=e.cachedViews.indexOf(t.name);a>-1&&e.cachedViews.splice(a,1)},DEL_OTHERS_VISITED_VIEWS:function(e,t){e.visitedViews=e.visitedViews.filter((function(e){return e.meta.affix||e.path===t.path}))},DEL_OTHERS_CACHED_VIEWS:function(e,t){var a=e.cachedViews.indexOf(t.name);e.cachedViews=a>-1?e.cachedViews.slice(a,a+1):[]},DEL_ALL_VISITED_VIEWS:function(e){var t=e.visitedViews.filter((function(e){return e.meta.affix}));e.visitedViews=t},DEL_ALL_CACHED_VIEWS:function(e){e.cachedViews=[]},UPDATE_VISITED_VIEW:function(e,t){var a,s=Object(B["a"])(e.visitedViews);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(i.path===t.path){i=Object.assign(i,t);break}}}catch(r){s.e(r)}finally{s.f()}}},z={addView:function(e,t){var a=e.dispatch;a("addVisitedView",t),a("addCachedView",t)},addVisitedView:function(e,t){var a=e.commit;a("ADD_VISITED_VIEW",t)},addCachedView:function(e,t){var a=e.commit;a("ADD_CACHED_VIEW",t)},delView:function(e,t){var a=e.dispatch,s=e.state;return new Promise((function(e){a("delVisitedView",t),a("delCachedView",t),e({visitedViews:Object(E["a"])(s.visitedViews),cachedViews:Object(E["a"])(s.cachedViews)})}))},delVisitedView:function(e,t){var a=e.commit,s=e.state;return new Promise((function(e){a("DEL_VISITED_VIEW",t),e(Object(E["a"])(s.visitedViews))}))},delCachedView:function(e,t){var a=e.commit,s=e.state;return new Promise((function(e){a("DEL_CACHED_VIEW",t),e(Object(E["a"])(s.cachedViews))}))},delOthersViews:function(e,t){var a=e.dispatch,s=e.state;return new Promise((function(e){a("delOthersVisitedViews",t),a("delOthersCachedViews",t),e({visitedViews:Object(E["a"])(s.visitedViews),cachedViews:Object(E["a"])(s.cachedViews)})}))},delOthersVisitedViews:function(e,t){var a=e.commit,s=e.state;return new Promise((function(e){a("DEL_OTHERS_VISITED_VIEWS",t),e(Object(E["a"])(s.visitedViews))}))},delOthersCachedViews:function(e,t){var a=e.commit,s=e.state;return new Promise((function(e){a("DEL_OTHERS_CACHED_VIEWS",t),e(Object(E["a"])(s.cachedViews))}))},delAllViews:function(e,t){var a=e.dispatch,s=e.state;return new Promise((function(e){a("delAllVisitedViews",t),a("delAllCachedViews",t),e({visitedViews:Object(E["a"])(s.visitedViews),cachedViews:Object(E["a"])(s.cachedViews)})}))},delAllVisitedViews:function(e){var t=e.commit,a=e.state;return new Promise((function(e){t("DEL_ALL_VISITED_VIEWS"),e(Object(E["a"])(a.visitedViews))}))},delAllCachedViews:function(e){var t=e.commit,a=e.state;return new Promise((function(e){t("DEL_ALL_CACHED_VIEWS"),e(Object(E["a"])(a.cachedViews))}))},updateVisitedView:function(e,t){var a=e.commit;a("UPDATE_VISITED_VIEW",t)}},R={namespaced:!0,state:D,mutations:V,actions:z};s["default"].use(i["a"]);var N=new i["a"].Store({modules:{app:p,settings:C,user:j,tagsView:R},getters:o});t["a"]=N},4775:function(e,t,a){"use strict";a("6646")},"4c3d":function(e,t,a){"use strict";a("d0e8")},"4d8f":function(e,t,a){"use strict";a("2cad")},"538b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ai-chat-container"},[a("el-card",{staticClass:"ai-chat-card",attrs:{"body-style":{padding:"0"}}},[a("div",{staticClass:"ai-chat-header"},[a("div",{staticClass:"ai-assistant-info"},[a("el-avatar",{style:{background:"#42b983"},attrs:{size:40,icon:"el-icon-s-custom"}}),a("div",{staticClass:"ai-assistant-details"},[a("h2",{staticClass:"ai-chat-title"},[e._v("AI健康问答助手")]),a("span",{staticClass:"ai-status",class:{online:!e.loading}},[e._v(" "+e._s(e.loading?"思考中...":"在线，随时为您解答")+" ")])])],1),a("el-tooltip",{attrs:{content:"清空对话历史",placement:"top"}},[a("el-button",{staticClass:"clear-btn",attrs:{type:"text",icon:"el-icon-delete",disabled:0===e.messages.length||e.loading},on:{click:e.clearMessages}})],1)],1),a("div",{ref:"msgBox",staticClass:"ai-chat-messages"},[a("transition-group",{attrs:{name:"message-fade"}},[0===e.messages.length?a("div",{key:"welcome",staticClass:"welcome-container"},[a("img",{staticClass:"robot-icon",attrs:{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f916.svg",alt:"AI机器人"}}),a("h3",[e._v("您好！我是您的健康顾问")]),a("p",[e._v("您可以向我咨询任何健康相关的问题，例如：")]),a("div",{staticClass:"suggestion-chips"},[a("div",{staticClass:"chip",on:{click:function(t){return e.useExample("如何保持健康的生活方式？")}}},[e._v("如何保持健康的生活方式？")]),a("div",{staticClass:"chip",on:{click:function(t){return e.useExample("每天应该喝多少水？")}}},[e._v("每天应该喝多少水？")]),a("div",{staticClass:"chip",on:{click:function(t){return e.useExample("如何改善睡眠质量？")}}},[e._v("如何改善睡眠质量？")]),a("div",{staticClass:"chip",on:{click:function(t){return e.useExample("运动后肌肉酸痛怎么缓解？")}}},[e._v("运动后肌肉酸痛怎么缓解？")])])]):e._e(),e._l(e.messages,(function(t,s){return a("div",{key:"msg-"+s,class:["ai-msg",t.role]},["user"===t.role?a("el-avatar",{staticClass:"msg-avatar",attrs:{icon:"el-icon-user-solid",size:36}}):a("el-avatar",{staticClass:"msg-avatar",style:{background:"#42b983"},attrs:{icon:"el-icon-s-custom",size:36}}),a("div",{staticClass:"ai-msg-bubble"},[a("div",{staticClass:"ai-msg-content",domProps:{innerHTML:e._s(e.formatMessage(t.content))}}),a("div",{staticClass:"msg-time"},[e._v(e._s(t.time||e.getCurrentTime()))])])],1)}))],2),e.isTyping?a("div",{staticClass:"typing-indicator"},[a("el-avatar",{staticClass:"msg-avatar",style:{background:"#42b983"},attrs:{size:36,icon:"el-icon-s-custom"}}),a("div",{staticClass:"ai-msg-bubble typing"},[a("span",{staticClass:"dot"}),a("span",{staticClass:"dot"}),a("span",{staticClass:"dot"})])],1):e._e()],1),a("div",{staticClass:"ai-chat-input"},[a("el-input",{staticClass:"message-input",attrs:{type:"textarea",rows:1,autosize:"",maxlength:500,placeholder:"请输入您的健康问题...",disabled:e.loading},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[a("template",{slot:"append"},[a("el-button",{attrs:{loading:e.loading,disabled:!e.input.trim()},on:{click:e.sendMsg}},[e._v(" 发送 ")])],1)],2),e.input.length>0?a("div",{staticClass:"input-tips"},[e._v(" 按Enter发送，Shift+Enter换行 ")]):e._e()],1)])],1)},i=[],r=a("ade3"),o=(a("99af"),a("a15b"),a("d81d"),a("e9c4"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("4d90"),a("5319"),a("2ca0"),a("498a"),Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({name:"AiHealthQA",data:function(){return{input:"",messages:[],loading:!1,isTyping:!1,eventSource:null,apiBaseUrl:"/prod-api",typingTimer:null,chatHistory:[]}},created:function(){this.loadChatHistory()},computed:{hasMessages:function(){return this.messages.length>0}}},"created",(function(){this.loadChatHistory()})),"mounted",(function(){document.addEventListener("keydown",this.handleKeyDown)})),"beforeDestroy",(function(){this.eventSource&&this.eventSource.close(),this.typingTimer&&clearTimeout(this.typingTimer),document.removeEventListener("keydown",this.handleKeyDown)})),"methods",{handleKeyDown:function(e){"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||e.shiftKey||this.loading||!this.input.trim()||(e.preventDefault(),this.sendMsg())},useExample:function(e){this.input=e,this.sendMsg()},getCurrentTime:function(){var e=new Date;return"".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},formatMessage:function(e){return e?this.parseMarkdown(e):""},parseMarkdown:function(e){var t=this;if(!e)return"";for(var a=e.split("\n"),s="",i=!1,r="",o=[],n=null,l=[],c=function(){"ul"===n&&(s+="</ul>\n"),"ol"===n&&(s+="</ol>\n"),n=null},d=function(){if(l.length>0){var e=l.join("\n");s+="<p>".concat(t.parseInline(e),"</p>\n"),l=[]}},u=0;u<a.length;u++){var p=a[u];if(p.trim().startsWith("```"))if(d(),c(),i){var m=r?"language-".concat(this.escapeHtml(r)):"",f=o.map((function(e){return t.escapeHtml(e)})).join("\n");s+='<pre><code class="'.concat(m,'">').concat(f,"</code></pre>\n"),i=!1,r=""}else i=!0,r=p.trim().substring(3).trim(),o=[];else if(i)o.push(p);else if(""!==p.trim())if(p.startsWith("#"))d(),c(),p.startsWith("### ")?s+="<h3>".concat(this.parseInline(p.substring(4)),"</h3>\n"):p.startsWith("## ")?s+="<h2>".concat(this.parseInline(p.substring(3)),"</h2>\n"):p.startsWith("# ")?s+="<h1>".concat(this.parseInline(p.substring(2)),"</h1>\n"):l.push(p);else{var h=p.match(/^(\s*)([-*+])\s+(.*)/),b=p.match(/^(\s*)(\d+)\.\s+(.*)/);if(h||b){d();var g=h?"ul":"ol",v=h?h[3]:b[3];n!==g&&(c(),s+="ul"===g?"<ul>\n":"<ol>\n",n=g),s+="<li>".concat(this.parseInline(v),"</li>\n")}else!n||h||b||c(),p.startsWith("> ")?(d(),c(),s+="<blockquote><p>".concat(this.parseInline(p.substring(2)),"</p></blockquote>\n")):p.match(/^(\*\*\*|---|___)\s*$/)?(d(),c(),s+="<hr>\n"):l.push(p)}else d(),c()}return d(),c(),'<div class="markdown-body">'.concat(s.trim(),"</div>")},escapeHtml:function(e){return e?e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"').replace(/'/g,"'"):""},parseInline:function(e){var t=this;if(!e)return"";var a=this.escapeHtml(e);return a=a.replace(/`([^`]+)`/g,(function(e,t){return"<code>".concat(t,"</code>")})),a=a.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),a=a.replace(/(?<!\*)\*([^*]+)\*(?!\*)/g,"<em>$1</em>"),a=a.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(function(e,a,s){var i=s.startsWith("http://")||s.startsWith("https://")||s.startsWith("/")?s:"#";return'<a href="'.concat(t.escapeHtml(i),'" target="_blank" rel="noopener noreferrer">').concat(a,"</a>")})),a=a.replace(/(https?:\/\/[^\s<]+)/g,(function(e,a){return'<a href="'.concat(t.escapeHtml(a),'" target="_blank" rel="noopener noreferrer">').concat(t.escapeHtml(a),"</a>")})),a},clearMessages:function(){var e=this;this.$confirm("确定要清空所有对话历史吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.messages=[],e.saveChatHistory(),e.$message({type:"success",message:"对话历史已清空"})})).catch((function(){}))},saveChatHistory:function(){try{localStorage.setItem("health-qa-history",JSON.stringify(this.messages))}catch(e){console.error("保存聊天历史失败:",e)}},loadChatHistory:function(){try{var e=localStorage.getItem("health-qa-history");e&&(this.messages=JSON.parse(e))}catch(t){console.error("加载聊天历史失败:",t)}},sendMsg:function(){if(this.input.trim()&&!this.loading){var e=this.input.trim(),t=this.getCurrentTime();this.messages.push({role:"user",content:e,time:t}),this.input="",this.scrollToBottom(),this.isTyping=!0,this.loading=!0,this.startSSE(e),this.saveChatHistory()}},scrollToBottom:function(){var e=this;this.$nextTick((function(){e.$refs.msgBox&&(e.$refs.msgBox.scrollTop=e.$refs.msgBox.scrollHeight)}))},startSSE:function(e){var t=this;this.eventSource&&this.eventSource.close();var a=this.getCurrentTime(),s=-1;this.messages.push({role:"ai",content:"",time:a}),s=this.messages.length-1,this.eventSource=new EventSource("".concat(this.apiBaseUrl,"/chatStream?question=").concat(encodeURIComponent(e))),this.eventSource.onopen=function(){console.log("SSE连接已打开")},this.eventSource.onmessage=function(e){t.isTyping=!1;var i=e.data;if("[DONE]"===i)return console.log("流式响应完成"),t.loading=!1,t.eventSource&&t.eventSource.close(),void t.saveChatHistory();try{var r,o=JSON.parse(i),n=null===(r=o.choices)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.delta)||void 0===r?void 0:r.content;if(null!==n&&void 0!==n){if(-1!==s){var l=t.messages[s].content+n;t.$set(t.messages,s,{role:"ai",content:l,time:a})}t.scrollToBottom()}}catch(c){console.error("解析SSE数据错误:",c)}},this.eventSource.onerror=function(e){if(console.error("SSE连接错误:",e),t.isTyping=!1,t.loading=!1,-1!==s){var i="\n\n[连接错误，请稍后重试或检查服务器状态]",r=t.messages[s].content||i;t.$set(t.messages,s,{role:"ai",content:r.trim()?r+i:i,time:a})}t.eventSource&&t.eventSource.close(),t.saveChatHistory()}}})),n=o,l=(a("3fbf"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"5bd44dd8",null);t["default"]=c.exports},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=(a("f5df1"),a("5c96")),r=a.n(i),o=(a("0fae"),a("f0d9"),a("b20f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),n=[],l={name:"App"},c=l,d=(a("0c09"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,null,null),p=u.exports,m=a("4360"),f=a("a18c");a("223d");s["default"].use(r.a),s["default"].config.productionTip=!1,new s["default"]({el:"#app",router:f["a"],store:m["a"],render:function(e){return e(p)}})},"5b86":function(e,t,a){},"5f1d":function(e,t,a){},"5f87":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l}));var s=a("a78e"),i=a.n(s),r="vue_admin_template_token";function o(){return i.a.get(r)}function n(e){return i.a.set(r,e)}function l(){return i.a.remove(r)}},"600a":function(e,t,a){"use strict";a("5f1d")},"61f7":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));a("ac1f"),a("00b4");function s(e){return/^(https?:|mailto:|tel:)/.test(e)}function i(e){return!0}},"62bf":function(e,t,a){},"656d":function(e,t,a){"use strict";a("2850")},6633:function(e,t,a){"use strict";a("ca2c")},6646:function(e,t,a){},"67a2":function(e,t,a){"use strict";a("d6ba")},"67d5":function(e,t,a){"use strict";var s=a("b775");t["a"]={getRoleList:function(e){return Object(s["a"])({url:"/role/list",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,roleName:e.roleName}})},addRole:function(e){return Object(s["a"])({url:"/role",method:"post",data:e})},updateRole:function(e){return Object(s["a"])({url:"/role",method:"put",data:e})},saveRole:function(e){return null==e.roleId&&void 0==e.roleId?this.addRole(e):this.updateRole(e)},getRoleById:function(e){return Object(s["a"])({url:"/role/".concat(e),method:"get"})},deleteRoleById:function(e){return Object(s["a"])({url:"/role/".concat(e),method:"delete"})},getAllRoleList:function(){return Object(s["a"])({url:"/role/all",method:"get"})}}},"6dd4":function(e,t,a){"use strict";a("6fce")},"6fce":function(e,t,a){},"70d8":function(e,t,a){"use strict";a("b0c0");var s=a("b775"),i=a("a18c");t["a"]={getUserList:function(e){return Object(s["a"])({url:"/user/list",method:"get",params:{pageNo:e.pageNo,pageSize:e.pageSize,username:e.username,phone:e.phone}})},addUser:function(e){return Object(s["a"])({url:"/user/add",method:"post",data:e}).catch((function(e){throw console.log(e.response.data),e}))},getUserById:function(e){return Object(s["a"])({url:"/user/".concat(e),method:"get"})},saveUser:function(e){return null==e.id&&void 0==e.id?this.addUser(e):this.updateUser(e)},updateUser:function(e){return Object(s["a"])({url:"/user/update",method:"put",data:e})},deleteUserById:function(e){return Object(s["a"])({url:"/user/".concat(e),method:"delete"})},register:function(e){return Object(s["a"])({url:"/user/register",method:"post",data:e})},getUserId:function(){return Object(s["a"])({url:"/user/getUserId",method:"get"}).catch((function(e){console.log(e),i["a"].push("/login")}))},getBodyInfo:function(){return Object(s["a"])({url:"/user/getBodyInfo",method:"get"}).catch((function(e){console.log(e),i["a"].push("/login")}))},getBodyList:function(e){return Object(s["a"])({url:"/user/getBodyList",method:"get",params:{id:e.id,pageNo:e.pageNo,pageSize:e.pageSize,name:e.name}})},getBodyById:function(e){return Object(s["a"])({url:"/user/getBodyById/".concat(e),method:"get"})},updateBody:function(e){return Object(s["a"])({url:"/user/updateBody",method:"put",data:e})},deleteBodyById:function(e){return Object(s["a"])({url:"/user/deleteBodyById/".concat(e),method:"delete"})},changePassword:function(e){return Object(s["a"])({url:"/user/changePassword",method:"put",data:e})},getUserBodyList:function(e){return Object(s["a"])({url:"/user/getUserBodyList",method:"get",params:{id:e.id,pageNo:e.pageNo,pageSize:e.pageSize,name:e.name}})},getUserBodyById:function(e){return Object(s["a"])({url:"/user/getUserBodyById/".concat(e),method:"get"})},updateUserBody:function(e){return Object(s["a"])({url:"/user/updateUserBody",method:"put",data:e})},deleteUserBodyById:function(e){return Object(s["a"])({url:"/user/deleteUserBodyById/".concat(e),method:"delete"})}}},7373:function(e,t,a){},"78c0":function(e,t,a){},"79ca":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"health-report-container"},[e.isLoading?a("div",{staticClass:"loading-container"},[a("div",{staticClass:"loading-animation"},[a("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[a("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),a("p",[e._v("正在生成健康评估报告...")])])]):e.error?a("div",{staticClass:"error-container"},[a("svg",{staticClass:"error-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"}})]),a("h3",{staticClass:"error-title"},[e._v("报告生成失败")]),a("p",{staticClass:"error-message"},[e._v(e._s(e.error))]),a("button",{staticClass:"retry-button",on:{click:e.fetchBodyInfo}},[e._v("重试")])]):e.bodyInfo?a("div",{staticClass:"report-content"},[a("div",{staticClass:"report-header"},[a("h1",{staticClass:"report-title"},[e._v("健康评估报告")]),a("p",{staticClass:"report-subtitle"},[e._v("基于您的身体数据生成的专业健康分析")]),a("div",{staticClass:"report-date"},[e._v("生成日期："+e._s(e.getCurrentDate()))])]),a("div",{staticClass:"report-grid"},[a("div",{staticClass:"card score-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"}})]),a("h3",{staticClass:"card-title"},[e._v("综合健康评分")])]),a("div",{staticClass:"score-content"},[a("div",{staticClass:"score-circle",style:{background:e.scoreGradient}},[a("div",{staticClass:"score-number"},[e._v(e._s(e.calculatedScore))]),a("div",{staticClass:"score-unit"},[e._v("分")])]),a("div",{staticClass:"score-level"},[e._v(e._s(e.scoreLevel))]),a("div",{staticClass:"score-description"},[e._v("基于录入数据的综合评估")])])]),a("div",{staticClass:"card info-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}})]),a("h3",{staticClass:"card-title"},[e._v("身体基础信息")])]),a("div",{staticClass:"info-list"},e._l(e.basicInfoItems,(function(t){return a("div",{key:t.label,staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v(e._s(t.label))]),a("span",{staticClass:"info-value",class:{highlight:t.highlight}},[e._v(" "+e._s(null!==t.value&&void 0!==t.value?t.value:"-")+" "),t.unit?a("span",{staticClass:"unit"},[e._v(e._s(t.unit))]):e._e()])])})),0)]),a("div",{staticClass:"card bmi-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z"}})]),a("h3",{staticClass:"card-title"},[e._v("身体质量指数 (BMI)")])]),a("div",{staticClass:"bmi-analysis"},[a("div",{staticClass:"bmi-value"},[e._v(e._s(Number(e.bmi).toFixed(1)))]),a("div",{staticClass:"bmi-slider"},[a("div",{staticClass:"bmi-track"},[a("div",{staticClass:"bmi-progress",style:{width:e.bmiPercentage+"%",backgroundColor:e.bmiColor}}),a("div",{staticClass:"bmi-thumb",style:{left:e.bmiPercentage+"%",backgroundColor:e.bmiColor}})]),e._m(0)]),a("div",{staticClass:"bmi-text"},[a("div",{staticClass:"body-type"},[e._v("体型判断: "),a("span",{staticClass:"highlight"},[e._v(e._s(e.bodyType))])]),a("div",{staticClass:"risk-analysis"},[a("div",[a("span",{staticClass:"risk-label"},[e._v("健康风险:")]),e._v(" "),a("span",{staticClass:"risk-value"},[e._v(e._s(e.obesityHealthRisk))])]),a("div",[a("span",{staticClass:"risk-label"},[e._v("疾病风险:")]),e._v(" "),a("span",{staticClass:"risk-value"},[e._v(e._s(e.obesityDiseaseRisk))])])])])])]),a("div",{staticClass:"card energy-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 1.6 1.5v6.5h2v-9l-5.7-3.1zM17.7 10.3c-.6-.3-1.2.1-1.4.7L15 16.4l-1.2-2.1c-.3-.5-.9-.6-1.4-.3l-1 .6c-1.7 1-3.4 1.5-5.4 1.5v2c2.3 0 4.4-.6 6.3-1.7l.6 1c.3.5.9.6 1.4.3l1-.6c.5-.3.6-.9.3-1.4l-1.2-2.1L17 11l2.4 5.9h2L18 9l-.3-1.2z"}})]),a("h3",{staticClass:"card-title"},[e._v("基础能量消耗")])]),a("div",{staticClass:"energy-consumption"},[a("div",{staticClass:"energy-chart"},[a("svg",{staticClass:"circular-chart",attrs:{viewBox:"0 0 36 36"}},[a("path",{staticClass:"circle-bg",attrs:{d:"M18 2.0845\n                  a 15.9155 15.9155 0 0 1 0 31.831\n                  a 15.9155 15.9155 0 0 1 0 -31.831"}}),a("path",{staticClass:"circle",attrs:{stroke:e.energyColor,"stroke-dasharray":e.calculatedBMRPercentage+", 100",d:"M18 2.0845\n                  a 15.9155 15.9155 0 0 1 0 31.831\n                  a 15.9155 15.9155 0 0 1 0 -31.831"}}),a("text",{staticClass:"percentage",attrs:{x:"18",y:"20.35"}},[e._v(e._s(e.calculatedBMRPercentage)+"%")])])]),a("div",{staticClass:"energy-text"},[a("div",{staticClass:"energy-comparison"},[e._v("比同龄人群高出 "),a("span",{staticClass:"highlight"},[e._v(e._s(e.calculatedBMRPercentage)+"%")])]),a("div",{staticClass:"energy-daily"},[e._v("每日基础能量消耗约 "),a("span",{staticClass:"highlight"},[e._v(e._s(e.calculatedBMR))]),e._v(" 千卡")])])])]),a("div",{staticClass:"card risk-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}})]),a("h3",{staticClass:"card-title"},[e._v("健康风险分析")])]),a("div",{staticClass:"risk-analysis-content"},[a("div",{staticClass:"risk-item"},[a("div",{staticClass:"risk-title"},[e._v("可能的健康风险：")]),a("div",{staticClass:"risk-content"},[e._v(e._s(e.calculatedRisk||"暂无数据评估"))])]),a("div",{staticClass:"suggestion-item"},[a("div",{staticClass:"suggestion-title"},[e._v("体型建议：")]),a("div",{staticClass:"suggestion-content"},[e._v(e._s(e.bodyTypeSuggestion))])]),a("div",{staticClass:"disclaimer"},[a("svg",{staticClass:"disclaimer-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}})]),a("span",[e._v("以上分析仅供参考，不能替代专业医疗诊断。如有不适，请及时就医。")])])])]),a("div",{staticClass:"card habits-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"}})]),a("h3",{staticClass:"card-title"},[e._v("生活习惯分析")])]),a("div",{staticClass:"habits-content"},[a("div",{staticClass:"habits-summary"},[e._v(" "+e._s(e.calculatedHabits||"暂无数据评估")+" ")]),e._m(1)])]),a("div",{staticClass:"card vision-card"},[a("div",{staticClass:"card-header"},[a("svg",{staticClass:"card-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}})]),a("h3",{staticClass:"card-title"},[e._v("视力分析")])]),a("div",{staticClass:"vision-content"},[a("div",{staticClass:"vision-info"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("您的视力：")]),a("span",{staticClass:"info-value"},[e._v(e._s(null!==e.bodyInfo.vision?e.bodyInfo.vision:"-")+" "),null!==e.bodyInfo.vision?a("span",{staticClass:"unit"},[e._v("度")]):e._e()])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("近视等级：")]),a("span",{staticClass:"info-value highlight"},[e._v(e._s(e.visionType))])])]),a("div",{staticClass:"vision-gauge"},[a("div",{staticClass:"gauge-track"},[a("div",{staticClass:"gauge-progress",style:{width:e.visionPercentage+"%",backgroundColor:e.visionColor}})]),e._m(2)]),a("div",{staticClass:"vision-suggestion"},[a("div",{staticClass:"suggestion-title"},[e._v("建议：")]),a("div",{staticClass:"suggestion-content"},[e._v(e._s(e.visionSuggestion))])])])])])]):a("div",{staticClass:"empty-container"},[a("svg",{staticClass:"empty-icon",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}})]),a("p",{staticClass:"empty-text"},[e._v("暂无健康评估数据，请先录入身体信息。")]),a("button",{staticClass:"empty-button",on:{click:e.navigateToBodyInfo}},[e._v("录入身体信息")])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bmi-scale"},[a("div",{staticClass:"bmi-mark",staticStyle:{left:"0%"}},[a("div",{staticClass:"bmi-mark-value"},[e._v("18.5")]),a("div",{staticClass:"bmi-mark-label"},[e._v("偏瘦")])]),a("div",{staticClass:"bmi-mark",staticStyle:{left:"25%"}},[a("div",{staticClass:"bmi-mark-value"},[e._v("24")]),a("div",{staticClass:"bmi-mark-label"},[e._v("正常")])]),a("div",{staticClass:"bmi-mark",staticStyle:{left:"50%"}},[a("div",{staticClass:"bmi-mark-value"},[e._v("28")]),a("div",{staticClass:"bmi-mark-label"},[e._v("超重")])]),a("div",{staticClass:"bmi-mark",staticStyle:{left:"75%"}},[a("div",{staticClass:"bmi-mark-value"},[e._v("35")]),a("div",{staticClass:"bmi-mark-label"},[e._v("肥胖")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"habits-suggestion"},[a("div",{staticClass:"suggestion-title"},[e._v("建议：")]),a("div",{staticClass:"suggestion-content"},[e._v(" 培养健康的饮食习惯和作息规律，坚持适度运动。了解科学的运动知识，有助于制定合理的计划并避免运动损伤。 ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gauge-labels"},[a("span",[e._v("正常")]),a("span",[e._v("轻度")]),a("span",[e._v("中度")]),a("span",[e._v("重度")])])}],r=a("5530"),o=(a("99af"),a("4de4"),a("caad"),a("a9e3"),a("b680"),a("d3b7"),a("2532"),a("159b"),a("c7eb")),n=a("1da1"),l=(a("a15b"),a("ac1f"),a("00b4"),a("466d"),a("498a"),a("70d8")),c={name:"HealthReport",data:function(){return{bodyInfo:null,isLoading:!1,error:null}},computed:{basicInfoItems:function(){if(!this.bodyInfo)return[];var e="-";return null!==this.bodyInfo.bloodPressure&&(e=String(this.bodyInfo.bloodPressure)),[{label:"体重",value:this.bodyInfo.weight,unit:"kg"},{label:"身高",value:this.bodyInfo.height,unit:"m"},{label:"BMI",value:null!==this.bmi?this.bmi.toFixed(2):null,unit:""},{label:"血糖",value:this.bodyInfo.bloodSugar,unit:"mmol/L"},{label:"血压",value:e,unit:"mmHg"},{label:"胆固醇",value:this.bodyInfo.bloodLipid,unit:"mmol/l"},{label:"心率",value:this.bodyInfo.heartRate,unit:"次/分钟"},{label:"视力",value:this.bodyInfo.vision,unit:"度"}]},bmi:function(){return!this.bodyInfo||null===this.bodyInfo.weight||null===this.bodyInfo.height||isNaN(this.bodyInfo.weight)||isNaN(this.bodyInfo.height)||this.bodyInfo.height<=0?null:this.bodyInfo.weight/(this.bodyInfo.height*this.bodyInfo.height)},bmiPercentage:function(){if(null===this.bmi)return 0;var e=Math.min(Math.max(this.bmi/35*100,0),100);return Math.round(e)},visionType:function(){if(null===this.bodyInfo||null===this.bodyInfo.vision||isNaN(this.bodyInfo.vision))return"未知";var e=this.bodyInfo.vision;return e>=600?"高度近视":e>=300?"中度近视":e>0?"轻度近视":0===e?"无近视":"数据异常"},visionSuggestion:function(){switch(this.visionType){case"高度近视":return"积极治疗，建议定期就医检查眼底情况。";case"中度近视":return"注意保护眼睛，避免长时间用眼，定期检查视力。";case"轻度近视":return"加强眼部保健，注意用眼卫生，增加户外活动时间。";case"无近视":return"很好，请继续保持良好的用眼习惯。";case"数据异常":return"请检查视力数据是否准确录入。";default:return"请完善视力信息以获取建议。"}},bodyType:function(){return null===this.bmi?"未知":this.bmi>=28?"肥胖":this.bmi>=24?"超重":this.bmi>=18.5?"正常":this.bmi>0?"偏瘦":"数据异常"},obesityHealthRisk:function(){switch(this.bodyType){case"肥胖":return"您的体重过高，肥胖状态会显著增加健康风险，请尽快咨询医生并开始健康管理。";case"超重":return"您的体重已超重，请注意调整饮食和增加运动，预防进一步增重及相关疾病。";case"正常":return"您的体重在正常范围内，请继续保持健康的生活方式。";case"偏瘦":return"您的体重偏低，请注意均衡营养，保证足够能量摄入，如有需要可咨询医生。";case"数据异常":return"BMI 数据异常，无法评估健康风险。";default:return"请完善体重和身高信息以评估健康风险。"}},obesityDiseaseRisk:function(){switch(this.bodyType){case"肥胖":return"显著增加患心血管疾病（如高血压、心脏病、中风）、2型糖尿病、高血脂、脂肪肝、睡眠呼吸暂停、某些癌症及关节炎等多种疾病的风险。";case"超重":return"增加患高血压、高血脂、糖尿病前期或2型糖尿病、心血管疾病、胆囊疾病等风险。";case"正常":return"相对风险较低，但仍需保持健康生活方式以预防慢性病。";case"偏瘦":return"体重过低可能与营养不良、免疫力下降、骨质疏松等问题有关。";case"数据异常":return"BMI 数据异常，无法评估疾病风险。";default:return"请完善体重和身高信息以评估疾病风险。"}},bodyTypeSuggestion:function(){switch(this.bodyType){case"肥胖":return"强烈建议咨询医生或营养师，制定个性化的减重计划，包括饮食控制和规律运动。";case"超重":return"建议调整饮食结构，减少高热量、高脂肪食物摄入，增加蔬果和全谷物，并坚持规律运动。";case"正常":return"恭喜！请继续保持均衡饮食和适度运动的良好习惯。";case"偏瘦":return"建议增加营养摄入，特别是蛋白质和健康脂肪，并进行适度的力量训练。如有需要可咨询医生。";case"数据异常":return"请检查体重和身高数据。";default:return"请完善体重和身高信息以获取体型建议。"}},calculatedRisk:function(){if(!this.bodyInfo)return"";var e=[];if(null!==this.bodyInfo.bloodPressure){var t=null;if("string"===typeof this.bodyInfo.bloodPressure&&this.bodyInfo.bloodPressure.includes("/")){var a=this.bodyInfo.bloodPressure.split("/"),s=Number(a[0]);isNaN(s)||(t=s)}else"number"!==typeof this.bodyInfo.bloodPressure||isNaN(this.bodyInfo.bloodPressure)||(t=this.bodyInfo.bloodPressure);if(null!==t&&t>=140)e.push("高血压风险");else if("string"===typeof this.bodyInfo.bloodPressure&&this.bodyInfo.bloodPressure.includes("/")){var i=this.bodyInfo.bloodPressure.split("/");if(i.length>1){var r=Number(i[1]);!isNaN(r)&&r>=90&&e.push("高血压风险")}}}return null!==this.bodyInfo.bloodLipid&&!isNaN(this.bodyInfo.bloodLipid)&&this.bodyInfo.bloodLipid>5.2&&e.push("高血脂风险"),null!==this.bodyInfo.bloodSugar&&!isNaN(this.bodyInfo.bloodSugar)&&this.bodyInfo.bloodSugar>6.1&&e.push("糖尿病风险"),!0===this.bodyInfo.drinking&&e.push("过量饮酒风险"),!1===this.bodyInfo.exercise&&e.push("缺乏运动风险"),null!==this.bodyInfo.heartRate&&!isNaN(this.bodyInfo.heartRate)&&this.bodyInfo.heartRate>100&&e.push("静息心率过快"),null!==this.bodyInfo.sleepDuration&&!isNaN(this.bodyInfo.sleepDuration)&&this.bodyInfo.sleepDuration<7&&e.push("睡眠不足风险"),"差"===this.bodyInfo.sleepQuality&&e.push("睡眠质量差风险"),!0===this.bodyInfo.smoking&&e.push("吸烟相关疾病风险"),"高度近视"!==this.visionType&&"中度近视"!==this.visionType||e.push("近视相关眼病风险"),null!==this.bodyInfo.waterConsumption&&!isNaN(this.bodyInfo.waterConsumption)&&this.bodyInfo.waterConsumption<1500&&e.push("饮水不足风险"),"肥胖"!==this.bodyType&&"超重"!==this.bodyType||e.push("超重/肥胖相关疾病风险"),e.length>0?e.join("，"):"无明显高风险项"},calculatedStandardHeightPercentage:function(){return 0},calculatedBMRPercentage:function(){if(!this.bodyInfo||null===this.bodyInfo.weight||null===this.bodyInfo.height||null===this.bodyInfo.age||!this.bodyInfo.sex||isNaN(this.bodyInfo.weight)||isNaN(this.bodyInfo.height)||isNaN(this.bodyInfo.age))return 0;var e,t=this.bodyInfo.weight,a=100*this.bodyInfo.height,s=this.bodyInfo.age,i=this.bodyInfo.sex;if(t<=0||a<=0||s<=0)return 0;if("男"===i.toLowerCase()||"male"===i.toLowerCase())e=88.362+13.397*t+4.799*a-5.677*s;else{if("女"!==i.toLowerCase()&&"female"!==i.toLowerCase())return 0;e=447.593+9.247*t+3.098*a-4.33*s}if(e<=0)return 0;var r=1500,o=Math.min(Math.max(e/r*100,0),200);return Math.round(o)},calculatedHabits:function(){if(!this.bodyInfo)return"";var e=[],t={"蔬菜":"偏好蔬菜","水果":"偏好水果","肉类":"偏好肉类","鱼类":"偏好鱼类","豆类":"偏好豆类","谷物":"偏好谷物"};return this.bodyInfo.foodTypes&&"string"===typeof this.bodyInfo.foodTypes&&t[this.bodyInfo.foodTypes]?e.push(t[this.bodyInfo.foodTypes]):this.bodyInfo.foodTypes&&"string"===typeof this.bodyInfo.foodTypes&&e.push("饮食包含: ".concat(this.bodyInfo.foodTypes)),null===this.bodyInfo.bloodSugar||isNaN(this.bodyInfo.bloodSugar)||e.push(this.bodyInfo.bloodSugar>7?"血糖偏高，可能与饮食/习惯有关":"血糖水平尚可"),null===this.bodyInfo.heartRate||isNaN(this.bodyInfo.heartRate)||e.push(this.bodyInfo.heartRate>100?"静息心率偏快，可能与压力/缺乏锻炼有关":"静息心率尚可"),"高度近视"!==this.visionType&&"中度近视"!==this.visionType||e.push("存在近视，提示注意用眼习惯"),null===this.bodyInfo.sleepDuration||isNaN(this.bodyInfo.sleepDuration)||e.push(this.bodyInfo.sleepDuration<7?"睡眠时长不足":"睡眠时长充足"),this.bodyInfo.sleepQuality&&"string"===typeof this.bodyInfo.sleepQuality&&""!==this.bodyInfo.sleepQuality.trim()&&e.push("睡眠质量自评：".concat(this.bodyInfo.sleepQuality)),e.push(!0===this.bodyInfo.smoking?"有吸烟习惯":"无吸烟习惯"),e.push(!0===this.bodyInfo.drinking?"有饮酒习惯":"无饮酒习惯"),e.push(!0===this.bodyInfo.exercise?"有运动习惯":"缺乏运动"),null===this.bodyInfo.waterConsumption||isNaN(this.bodyInfo.waterConsumption)||e.push(this.bodyInfo.waterConsumption<1500?"日均饮水量可能不足":"日均饮水量充足"),e.length>0?e.join("； "):"暂无足够信息评估生活习惯"},calculatedScore:function(){if(!this.bodyInfo)return 0;var e=100;null!==this.bmi?"肥胖"===this.bodyType?e-=25:"超重"===this.bodyType?e-=15:"偏瘦"===this.bodyType?e-=10:"数据异常"===this.bodyType&&(e-=15):e-=10;var t=this.calculatedRisk||"",a="无明显高风险项"===t||""===t?0:(t.match(/，/g)||[]).length+1;a>5?e-=25:a>2?e-=15:a>0&&(e-=5),"高度近视"===this.visionType?e-=15:"中度近视"===this.visionType?e-=10:"数据异常"===this.visionType&&(e-=5);var s=this.calculatedBMRPercentage;return s>0?(s<80||s>120)&&(e-=10):this.bodyInfo.weight&&this.bodyInfo.height&&this.bodyInfo.age&&this.bodyInfo.sex&&(e-=5),!0===this.bodyInfo.smoking&&(e-=10),!0===this.bodyInfo.drinking&&(e-=5),!1===this.bodyInfo.exercise&&(e-=10),(null!==this.bodyInfo.sleepDuration&&this.bodyInfo.sleepDuration<7||"差"===this.bodyInfo.sleepQuality)&&(e-=10),Math.max(0,Math.min(e,100))}},methods:{fetchBodyInfo:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.error=null,t.prev=2,t.next=5,l["a"].getBodyInfo();case 5:a=t.sent,a&&a.data&&a.data.bodyList&&a.data.bodyList.length>0?(s=a.data.bodyList[0],e.bodyInfo=e.preprocessBodyInfo(s),console.log("获取到身体信息:",e.bodyInfo)):(console.warn("未获取到有效的身体信息"),e.error="未获取到有效的身体信息，请确认是否已录入。",e.bodyInfo=null),t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error("获取身体信息失败:",t.t0),e.error="获取健康数据失败: ".concat(t.t0.message||"未知错误",". 请稍后重试或联系管理员。"),t.t0.response&&401===t.t0.response.status&&(e.$message.error("登录已过期，请重新登录"),e.$router.push("/login")),e.bodyInfo=null;case 15:return t.prev=15,e.isLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,9,15,18]])})))()},preprocessBodyInfo:function(e){var t=["weight","height","bloodSugar","bloodLipid","heartRate","vision","age","sleepDuration","waterConsumption"],a=["smoking","drinking","exercise"],s=Object(r["a"])({},e);if(t.forEach((function(e){if(void 0!==s[e]&&null!==s[e]&&""!==s[e]){var t=Number(s[e]);s[e]=isNaN(t)?null:t}else s[e]=null})),"string"===typeof e.bloodPressure)s.bloodPressure=e.bloodPressure.trim(),/^\d+(\.\d+)?\/\d+(\.\d+)?$/.test(s.bloodPressure)||/^\d+(\.\d+)?$/.test(s.bloodPressure)||console.warn("血压格式不规范: ".concat(s.bloodPressure));else if(void 0!==e.bloodPressure&&null!==e.bloodPressure){var i=Number(e.bloodPressure);s.bloodPressure=isNaN(i)?String(e.bloodPressure):i}else s.bloodPressure=null;return a.forEach((function(e){void 0!==s[e]&&null!==s[e]?"string"===typeof s[e]?s[e]="true"===s[e].trim().toLowerCase():s[e]=Boolean(s[e]):s[e]=null})),["foodTypes","sex","sleepQuality"].forEach((function(e){"string"===typeof s[e]?s[e]=s[e].trim():null!==s[e]&&void 0!==s[e]||(s[e]="")})),delete s.bmi,s}},created:function(){this.fetchBodyInfo()}},d=Object(r["a"])(Object(r["a"])({},c),{},{computed:Object(r["a"])(Object(r["a"])({},c.computed||{}),{},{basicInfoItems:function(){var e,t,a,s,i,r=[{label:"身高",value:null===(e=this.bodyInfo)||void 0===e?void 0:e.height,unit:"cm"},{label:"体重",value:null===(t=this.bodyInfo)||void 0===t?void 0:t.weight,unit:"kg"},{label:"年龄",value:null===(a=this.bodyInfo)||void 0===a?void 0:a.age,unit:"岁"},{label:"性别",value:"male"===(null===(s=this.bodyInfo)||void 0===s?void 0:s.gender)?"男":"女"},{label:"BMI",value:this.bmi?Number(this.bmi).toFixed(1):null,highlight:!0},{label:"体脂率",value:null!==(i=this.bodyInfo)&&void 0!==i&&i.fatRate?(100*this.bodyInfo.fatRate).toFixed(1):null,unit:"%",highlight:!0}];return r.filter((function(e){return void 0!==e}))},bmiColor:function(){return null==this.bmi?"#e0e0e0":this.bmi<18.5?"#3498db":this.bmi<24?"#2ecc71":this.bmi<28?"#f39c12":"#e74c3c"},bmiPercentage:function(){if(null==this.bmi)return 0;var e=15,t=40,a=(this.bmi-e)/(t-e)*100;return Math.min(Math.max(a,0),100)},calculatedBMR:function(){return this.bodyInfo&&this.bodyInfo.bmr?this.bodyInfo.bmr:0},calculatedBMRPercentage:function(){return this.calculatedBMR>0?Math.min(Math.round(this.calculatedBMR/1500*100),100):0},energyColor:function(){var e=this.calculatedBMRPercentage;return e<30?"#3498db":e<70?"#2ecc71":"#f39c12"},scoreLevel:function(){var e=this.calculatedScore;return e>=90?"优秀":e>=80?"良好":e>=70?"一般":e>=60?"较差":"差"},scoreGradient:function(){var e=this.calculatedScore;return e>=90?"linear-gradient(135deg, #2ecc71, #27ae60)":e>=80?"linear-gradient(135deg, #3498db, #2980b9)":e>=70?"linear-gradient(135deg, #f39c12, #e67e22)":e>=60?"linear-gradient(135deg, #e74c3c, #c0392b)":"linear-gradient(135deg, #95a5a6, #7f8c8d)"},visionPercentage:function(){if(null===this.bodyInfo.vision)return 0;var e=1e3,t=this.bodyInfo.vision/e*100;return Math.min(Math.max(t,0),100)},visionColor:function(){return null===this.bodyInfo.vision?"#e0e0e0":this.bodyInfo.vision<300?"#2ecc71":this.bodyInfo.vision<600?"#f39c12":"#e74c3c"}}),methods:Object(r["a"])(Object(r["a"])({},c.methods),{},{getCurrentDate:function(){var e=new Date;return"".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")},navigateToBodyInfo:function(){var e;(null===(e=this.$router)||void 0===e?void 0:e.push("/body-info"))||alert("请前往身体信息页面录入数据")}}),mounted:function(){this.fetchBodyInfo(),document.querySelectorAll('[class*="iconfont"]').forEach((function(e){return e.remove()})),document.querySelectorAll("style").forEach((function(e){e.innerText.includes("iconfont")&&e.remove()})),document.querySelectorAll("link").forEach((function(e){e.href&&e.href.includes("iconfont")&&e.remove()}))}}),u=d,p=(a("7ee9"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,null,null);t["default"]=m.exports},"7bdf":function(e,t,a){},"7ee9":function(e,t,a){"use strict";a("38e2")},"7f37":function(e,t,a){},8158:function(e,t,a){"use strict";a("5b86")},8235:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"details-manage-container"},[e._m(0),a("el-card",{staticClass:"search-card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20,type:"flex",align:"middle",justify:"space-between"}},[a("el-col",{attrs:{xs:24,sm:16,md:18,lg:18}},[a("div",{staticClass:"search-controls"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"输入运动类型搜索","prefix-icon":"el-icon-search",clearable:"",size:"medium"},model:{value:e.searchModel.sportType,callback:function(t){e.$set(e.searchModel,"sportType",t)},expression:"searchModel.sportType"}}),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.getDetailList}},[e._v("查询")]),a("el-button",{attrs:{plain:"",icon:"el-icon-refresh",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)]),a("el-col",{staticClass:"action-col",attrs:{xs:24,sm:8,md:6,lg:6}},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("新增运动")])],1)],1)],1),a("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("运动详情列表")]),a("span",{staticClass:"data-count"},[e._v("共 "+e._s(e.total)+" 条记录")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.detailList,stripe:"","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","header-cell-style":{backgroundColor:"#f5f7fa",color:"#606266",fontWeight:"bold"},"row-class-name":e.tableRowClassName,"empty-text":"暂无数据"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"sportType",label:"运动类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(s.sportType))])]}}])}),a("el-table-column",{attrs:{prop:"disease",label:"禁忌疾病","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"method",label:"运动方法","min-width":"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"notes",label:"注意事项","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(t){return e.openEditUi(s.id)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.deleteDetail(s)}}})],1)]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"empty-data"},[a("i",{staticClass:"el-icon-document"}),a("p",[e._v("暂无运动详情数据")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("添加第一条")])],1)])],2)],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:!0,small:e.isMobile},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth,fullscreen:e.isMobile,top:"5vh","close-on-click-modal":!1},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"detailFormRef",staticClass:"detail-form",attrs:{model:e.detailForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"运动类型",prop:"sportType"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入运动类型",maxlength:"50","show-word-limit":""},model:{value:e.detailForm.sportType,callback:function(t){e.$set(e.detailForm,"sportType",t)},expression:"detailForm.sportType"}})],1),a("el-form-item",{attrs:{label:"禁忌疾病",prop:"disease"}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:3,placeholder:"请输入不适合此运动的疾病类型",maxlength:"500","show-word-limit":""},model:{value:e.detailForm.disease,callback:function(t){e.$set(e.detailForm,"disease",t)},expression:"detailForm.disease"}})],1),a("el-form-item",{attrs:{label:"运动方法",prop:"method"}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:5,placeholder:"请详细描述运动方法和步骤",maxlength:"1000","show-word-limit":""},model:{value:e.detailForm.method,callback:function(t){e.$set(e.detailForm,"method",t)},expression:"detailForm.method"}})],1),a("el-form-item",{attrs:{label:"注意事项",prop:"notes"}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:4,placeholder:"请输入进行此运动时的注意事项",maxlength:"500","show-word-limit":""},model:{value:e.detailForm.notes,callback:function(t){e.$set(e.detailForm,"notes",t)},expression:"detailForm.notes"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveDetail}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[e._v("运动详情管理")]),a("p",{staticClass:"page-description"},[e._v("管理各类运动的详细信息，包括运动方法、禁忌疾病和注意事项")])])}],r=a("5530"),o=a("c7eb"),n=a("1da1"),l=a("3373"),c={name:"SportDetailManagement",data:function(){return{isMobile:!1,listLoading:!1,saveLoading:!1,detailForm:{id:null,sportType:"",disease:"",method:"",notes:""},detailList:[],dialogFormVisible:!1,title:"",total:0,searchModel:{sportType:"",pageNo:1,pageSize:10},rules:{sportType:[{required:!0,message:"请输入运动类型",trigger:"blur"},{min:2,max:50,message:"长度在2到50个字符之间",trigger:"blur"}],method:[{required:!0,message:"请输入运动方法",trigger:"blur"}]}}},computed:{dialogWidth:function(){return this.isMobile?"95%":"60%"}},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"even-row":"odd-row"},resetSearch:function(){this.searchModel.sportType="",this.searchModel.pageNo=1,this.getDetailList()},checkScreenWidth:function(){this.isMobile=window.innerWidth<768},saveDetail:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.detailFormRef.validate(function(){var t=Object(n["a"])(Object(o["a"])().mark((function t(a){var s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=20;break}return e.saveLoading=!0,t.prev=2,t.next=5,l["a"].saveDetail(e.detailForm);case 5:s=t.sent,e.$message({message:s.message||(e.detailForm.id?"修改成功":"新增成功"),type:"success"}),e.dialogFormVisible=!1,e.getDetailList(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),console.error("保存失败:",t.t0),e.$message.error("操作失败，请稍后重试");case 15:return t.prev=15,e.saveLoading=!1,t.finish(15);case 18:t.next=22;break;case 20:return console.log("表单验证失败"),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[2,11,15,18]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},clearForm:function(){var e=this;this.detailForm={id:null,sportType:"",disease:"",method:"",notes:""},this.$nextTick((function(){e.$refs.detailFormRef.clearValidate()}))},handleSizeChange:function(e){this.searchModel.pageSize=e,this.searchModel.pageNo=1,this.getDetailList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getDetailList()},getDetailList:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,l["a"].getDetailList(e.searchModel);case 4:a=t.sent,e.detailList=a.data.rows,e.total=a.data.total,t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("获取列表失败:",t.t0),e.$message.error("获取列表失败"),e.detailList=[],e.total=0;case 15:return t.prev=15,e.listLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,9,15,18]])})))()},openEditUi:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.clearForm(),null!=e){a.next=6;break}t.title="新增运动详情",t.dialogFormVisible=!0,a.next=19;break;case 6:return t.title="修改运动详情",a.prev=7,a.next=10,l["a"].getDetailById(e);case 10:s=a.sent,t.detailForm=Object(r["a"])({},s.data),t.dialogFormVisible=!0,a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](7),console.error("获取详情失败:",a.t0),t.$message.error("获取详情失败");case 19:case"end":return a.stop()}}),a,null,[[7,15]])})))()},deleteDetail:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm('确认删除 "'.concat(e.sportType,'" 吗？'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"});case 3:return a.prev=3,t.listLoading=!0,a.next=7,l["a"].deleteDetailById(e.id);case 7:s=a.sent,t.$message({type:"success",message:s.message||"删除成功"}),t.getDetailList(),a.next=17;break;case 12:a.prev=12,a.t0=a["catch"](3),console.error("删除失败:",a.t0),t.$message.error("删除失败"),t.listLoading=!1;case 17:a.next=22;break;case 19:a.prev=19,a.t1=a["catch"](0),t.$message({type:"info",message:"已取消删除"});case 22:case"end":return a.stop()}}),a,null,[[0,19],[3,12]])})))()}},created:function(){this.checkScreenWidth(),window.addEventListener("resize",this.checkScreenWidth),this.getDetailList()},beforeDestroy:function(){window.removeEventListener("resize",this.checkScreenWidth)}},d=c,u=(a("9d5d"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,"1848d05b",null);t["default"]=p.exports},"83d6":function(e,t){e.exports={title:"健康管理系统",fixedHeader:!1,sidebarLogo:!0}},"85cb":function(e,t,a){},"89e0":function(e,t,a){},"8cdb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[e._m(0),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[e._v("糟糕!")]),e._m(1),a("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),a("div",{staticClass:"bullshit__info"},[e._v("请检查您输入的URL是否正确，或者点击下面的按钮返回主页。")]),a("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("返回主页")])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pic-404"},[s("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),s("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bullshit__info"},[e._v("版权所有 "),a("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://skyforever.top",target:"_blank"}},[e._v("健康管理系统")])])}],r={name:"Page404",computed:{message:function(){return"你进入了一个未知领域..."}}},o=r,n=(a("e13c"),a("2877")),l=Object(n["a"])(o,s,i,!1,null,"5eb21038",null);t["default"]=l.exports},9406:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("h1",{staticClass:"dashboard-title"},[e._v("健康数据概览")]),a("div",{staticClass:"stats-cards"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12,md:6,lg:6}},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-icon"},[a("i",{staticClass:"el-icon-s-data"})]),a("div",{staticClass:"stat-content"},[a("div",{staticClass:"stat-label"},[e._v("身高")]),a("div",{staticClass:"stat-value"},[e._v(e._s(this.bodyInfo.height||"-")),a("span",{staticClass:"unit"},[e._v("m")])])])])]),a("el-col",{attrs:{xs:24,sm:12,md:6,lg:6}},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-icon"},[a("i",{staticClass:"el-icon-s-marketing"})]),a("div",{staticClass:"stat-content"},[a("div",{staticClass:"stat-label"},[e._v("体重")]),a("div",{staticClass:"stat-value"},[e._v(e._s(this.bodyInfo.weight||"-")),a("span",{staticClass:"unit"},[e._v("kg")])])])])]),a("el-col",{attrs:{xs:24,sm:12,md:6,lg:6}},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-icon"},[a("i",{staticClass:"el-icon-s-custom"})]),a("div",{staticClass:"stat-content"},[a("div",{staticClass:"stat-label"},[e._v("BMI")]),a("div",{staticClass:"stat-value"},[e._v(e._s(this.bmi||"-"))])])])]),a("el-col",{attrs:{xs:24,sm:12,md:6,lg:6}},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-icon"},[a("i",{staticClass:"el-icon-user"})]),a("div",{staticClass:"stat-content"},[a("div",{staticClass:"stat-label"},[e._v("年龄")]),a("div",{staticClass:"stat-value"},[e._v(e._s(this.bodyInfo.age||"-"))])])])])],1)],1),a("div",{staticClass:"charts-container"},[a("div",{staticClass:"chart-wrapper"},[a("div",{ref:"myChart",staticClass:"chart-box"})]),e._m(0),e._m(1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-wrapper"},[a("div",{staticClass:"chart-box",attrs:{id:"chart-container"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-wrapper"},[a("div",{staticClass:"chart-box",attrs:{id:"chart-containerLine"}})])}],r=a("c7eb"),o=a("3835"),n=a("1da1"),l=(a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("313e")),c=a("70d8"),d=a("3373"),u={data:function(){return{charts:"",bodyInfo:"",bmi:null,score:null,BodyNotesInfo:"",vision:[],waterConsumption:[],bloodSugar:[],bloodPressure:[],date:[],heartRate:[]}},methods:{getBodyInfo:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getBodyInfo();case 3:a=t.sent,s=Object(o["a"])(a.data.bodyList,1),i=s[0],e.bodyInfo=i,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("获取身体信息错误"),e.$router.push("/login");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getBodyNotes:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].getBodyNotes(e.bodyInfo.id);case 3:a=t.sent,e.BodyNotesInfo=a.data,e.BodyNotesInfo.forEach((function(t){e.vision.push(t.vision),e.waterConsumption.push(t.waterConsumption),e.bloodSugar.push(t.bloodSugar),e.bloodPressure.push(t.bloodPressure),e.heartRate.push(t.heartRate);var a=new Date(t.date).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.date.push(a)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("获取身体信息错误");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},bmiM:function(){var e=Number(this.bodyInfo.weight),t=e/(this.bodyInfo.height*this.bodyInfo.height);return this.bmi=t.toFixed(2),t.toFixed(2)},BarChart:function(){var e=document.getElementById("chart-container"),t=l["a"](e),a={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},title:{text:"视力变化趋势图",textStyle:{fontWeight:"normal",fontSize:25,color:"#666"},left:"center",top:20,padding:[10,10,0,10]},xAxis:[{type:"category",data:this.date,axisTick:{alignWithLabel:!0},axisLabel:{interval:1,rotate:45,textStyle:{fontSize:12}}}],yAxis:[{type:"value",axisLabel:{textStyle:{fontSize:12}}}],series:[{name:"视力",type:"bar",barWidth:"60%",data:this.vision,itemStyle:{shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0, 0, 0, 0.5)",barBorderRadius:5}}]};t.setOption(a)},area:function(){var e=document.getElementById("chart-containerLine"),t=l["a"](e),a={title:{text:"血压血糖变化趋势图",textStyle:{fontWeight:"normal",fontSize:25,color:"#666"},left:"center",top:20,padding:[10,10,0,10]},tooltip:{trigger:"axis"},legend:{data:["血压","血糖"]},xAxis:{type:"category",data:this.date,axisLabel:{interval:1,textStyle:{fontSize:12}}},yAxis:{type:"value"},series:[{name:"血压",data:this.bloodPressure,type:"line"},{name:"血糖",data:this.bloodSugar,type:"line"}]};t.setOption(a)}},watch:{bodyInfo:{deep:!0,handler:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a,s,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bmiM(),t.next=3,e.getBodyNotes();case 3:e.BarChart(),e.area(),a=e.$refs.myChart,s=l["a"](a),i={title:{text:"心率变化趋势图",textStyle:{fontWeight:"normal",fontSize:25,color:"#666"},left:"center",top:20},xAxis:{type:"category",data:e.date,axisLabel:{fontSize:12,interval:2},axisTick:{show:!1}},yAxis:{type:"value",axisLine:{show:!1},splitLine:{lineStyle:{type:"dashed",color:"#ddd"}},axisTick:{show:!1}},tooltip:{trigger:"axis",formatter:function(e){return e[0].name+"："+e[0].value}},series:[{data:e.heartRate,type:"line",smooth:!0,lineStyle:{width:3,color:"#00bfff"},symbol:"circle",symbolSize:8,itemStyle:{color:"#00bfff",borderColor:"#fff",borderWidth:2},markLine:{data:[{type:"average",name:"平均值"}],label:{position:"insideEndBottom",formatter:"{b}：{c}"},lineStyle:{type:"dashed",color:"green",width:2},symbol:"none"},animation:!0,animationDuration:3e3,animationEasing:"cubicInOut"}]},s.setOption(i);case 9:case"end":return t.stop()}}),t)})))()}}},created:function(){this.getBodyInfo()},mounted:function(){return Object(n["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},p=u,m=(a("1eb3"),a("2877")),f=Object(m["a"])(p,s,i,!1,null,"352ccefe",null);t["default"]=f.exports},9608:function(e,t,a){"use strict";a("d791")},"9b2f":function(e,t,a){"use strict";a("cb75")},"9d5d":function(e,t,a){"use strict";a("bd9e")},"9ed6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[a("el-row",{staticStyle:{"text-align":"center",width:"100%"},attrs:{gutter:24}},[a("el-col",{staticStyle:{display:"flex","align-items":"center"},attrs:{span:24}},[a("i",{staticClass:"el-icon-s-custom",staticStyle:{"font-size":"40px",color:"#409EFF","margin-right":"10px"}}),a("span",{staticStyle:{"font-size":"32px","font-weight":"600"}},[e._v("健康管理系‌统")])])],1),a("hr"),a("el-form-item",{staticClass:"input-container",attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名",name:"username",type:"text",tabindex:"1","auto-complete":"on","prefix-icon":"el-icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{staticClass:"input-container",attrs:{prop:"password"}},[a("el-input",{key:e.passwordType,attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("i",{class:"password"===e.passwordType?"el-icon-view":"el-icon-view-off",staticStyle:{cursor:"pointer"}})])],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登 录")])],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e._v("注 册")])],1)],1)],1)},i=[],r=a("61f7"),o={name:"Login",data:function(){var e=function(e,t,a){Object(r["b"])(t)?a():a(new Error("请输入正确的用户名"))},t=function(e,t,a){t.length<6?a(new Error("输入的密码不能少于6位")):a()};return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0}},methods:{showPwd:function(){this.passwordType="password"===this.passwordType?"text":"password"},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))},handleRegister:function(){this.$router.push({path:"/register"})}}},n=o,l=(a("cbc6"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,null,null);t["default"]=c.exports},a17b:function(e,t,a){"use strict";a("7373")},a18c:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));a("d3b7"),a("3ca3"),a("ddb0");var s=a("2b0e"),i=a("8c4f"),r=a("c1f7");s["default"].use(i["a"]);var o=[{path:"/login",component:function(){return Promise.resolve().then(a.bind(null,"9ed6"))},hidden:!0},{path:"/404",component:function(){return Promise.resolve().then(a.bind(null,"8cdb"))},hidden:!0},{path:"/",component:r["a"],redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:function(){return Promise.resolve().then(a.bind(null,"9406"))},meta:{title:"首页",icon:"el-icon-house",affix:!0}}]},{path:"/register",name:"Register",component:function(){return Promise.resolve().then(a.bind(null,"0c99"))},hidden:!0,meta:{requiresAuth:!1}},{path:"/change-password",name:"ChangePassword",component:function(){return Promise.resolve().then(a.bind(null,"bd9e4"))},hidden:!0,meta:{requiresAuth:!1}}],n=function(){return new i["a"]({scrollBehavior:function(){return{y:0}},routes:o})},l=n();function c(){var e=n();l.matcher=e.matcher}t["a"]=l},a227:function(e,t,a){"use strict";a("d25c")},a36b:function(e,t,a){e.exports=a.p+"static/img/404.a57b6f31.png"},ad53:function(e,t,a){"use strict";a("78c0")},afb2:function(e,t,a){},b20f:function(e,t,a){e.exports={primary:"#42b983",secondary:"#1e88e5",success:"#4caf50",warning:"#ff9800",danger:"#f44336",info:"#00bcd4",textPrimary:"#2c3e50",textRegular:"#5e6d82",textSecondary:"#909399",bgColor:"#f5f7fa",cardBg:"#fff",disabledBg:"#f5f7fa",menuText:"#5e6d82",menuActiveText:"#42b983",subMenuActiveText:"#359368",menuBg:"#f8fafc",menuHover:"rgba(66,185,131,.1)",subMenuBg:"#f1f7fc",subMenuHover:"rgba(30,136,229,.1)",sideBarWidth:"220px"}},b2c2:function(e,t,a){},b677:function(e,t,a){"use strict";a("be5b")},b6ef:function(e,t,a){"use strict";a("89e0")},b775:function(e,t,a){"use strict";a("d3b7");var s=a("a9a8"),i=a("5c96"),r=a("4360"),o=a("5f87"),n=(a("3f52"),s["a"].create({baseURL:"/prod-api",timeout:5e3}));n.interceptors.request.use((function(e){return r["a"].getters.token&&(e.headers["X-Token"]=Object(o["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),n.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=n},bd0d:function(e,t,a){"use strict";a("85cb")},bd5b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sport-manage-container"},[e._m(0),a("el-card",{staticClass:"search-card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20,type:"flex",align:"middle",justify:"space-between"}},[a("el-col",{attrs:{xs:24,sm:16,md:18,lg:18}},[a("div",{staticClass:"search-controls"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"输入运动类型搜索","prefix-icon":"el-icon-search",clearable:"",size:"medium"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSportList(t)}},model:{value:e.searchModel.sportType,callback:function(t){e.$set(e.searchModel,"sportType","string"===typeof t?t.trim():t)},expression:"searchModel.sportType"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.listLoading,size:"medium"},on:{click:e.getSportList}},[e._v("查询")]),a("el-button",{attrs:{plain:"",icon:"el-icon-refresh",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)]),a("el-col",{staticClass:"action-col",attrs:{xs:24,sm:8,md:6,lg:6}},[a("el-button",{staticClass:"add-btn",attrs:{type:"success",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("新增运动")])],1)],1)],1),a("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("运动信息列表")]),a("span",{staticClass:"data-count"},[e._v("共 "+e._s(e.total)+" 条记录")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.sportList,stripe:"","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","header-cell-style":{backgroundColor:"#f5f7fa",color:"#606266",fontWeight:"bold"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"sportType",label:"运动类型","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",effect:"plain",type:"success"}},[e._v(e._s(t.row.sportType))])]}}])}),a("el-table-column",{attrs:{prop:"suitableFrequency",label:"运动频率","min-width":"140"}}),a("el-table-column",{attrs:{prop:"suitableTime",label:"运动时间","min-width":"140"}}),a("el-table-column",{attrs:{prop:"recommendedSpeed",label:"运动速度","min-width":"140"}}),a("el-table-column",{attrs:{prop:"suitableHeartRate",label:"运动心率","min-width":"140"}}),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return e.openEditUi(t.row.id)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return e.deleteSport(t.row)}}})],1)]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"empty-data"},[a("i",{staticClass:"el-icon-document"}),a("p",[e._v("暂无运动信息数据")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("添加运动信息")])],1)])],2),a("el-pagination",{attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",background:"",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"sport-dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth,fullscreen:e.isMobile,top:"5vh","destroy-on-close":"","close-on-click-modal":!1},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"sportFormRef",staticClass:"sport-form",attrs:{model:e.sportForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"运动类型",prop:"sportType"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入运动类型（如慢跑、游泳等）",maxlength:"50","show-word-limit":""},model:{value:e.sportForm.sportType,callback:function(t){e.$set(e.sportForm,"sportType",t)},expression:"sportForm.sportType"}})],1),a("el-form-item",{attrs:{label:"运动频率",prop:"suitableFrequency"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入建议的运动频率（如每周 3-5 次）",maxlength:"100","show-word-limit":""},model:{value:e.sportForm.suitableFrequency,callback:function(t){e.$set(e.sportForm,"suitableFrequency",t)},expression:"sportForm.suitableFrequency"}})],1),a("el-form-item",{attrs:{label:"运动时间",prop:"suitableTime"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入建议的运动时间（如每次 30-45 分钟）",maxlength:"100","show-word-limit":""},model:{value:e.sportForm.suitableTime,callback:function(t){e.$set(e.sportForm,"suitableTime",t)},expression:"sportForm.suitableTime"}})],1),a("el-form-item",{attrs:{label:"运动速度",prop:"recommendedSpeed"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入建议的运动速度（如中等强度）",maxlength:"100","show-word-limit":""},model:{value:e.sportForm.recommendedSpeed,callback:function(t){e.$set(e.sportForm,"recommendedSpeed",t)},expression:"sportForm.recommendedSpeed"}})],1),a("el-form-item",{attrs:{label:"运动心率",prop:"suitableHeartRate"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入建议的运动心率范围（如 120-150 次/分钟）",maxlength:"100","show-word-limit":""},model:{value:e.sportForm.suitableHeartRate,callback:function(t){e.$set(e.sportForm,"suitableHeartRate",t)},expression:"sportForm.suitableHeartRate"}})],1),a("div",{staticClass:"form-tips"},[a("i",{staticClass:"el-icon-info"}),a("span",[e._v("请填写准确的运动信息，以便用户参考")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveSport}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[e._v("运动信息管理")]),a("p",{staticClass:"page-description"},[e._v("管理各类运动的基本信息，包括运动频率、时间、速度和心率建议")])])}],r=a("5530"),o=a("c7eb"),n=a("1da1"),l=a("3373"),c={name:"SportManagement",data:function(){var e=function(e,t,a,s){if(!t)return a(new Error("请输入".concat(s)));a()};return{isMobile:!1,listLoading:!1,saveLoading:!1,sportForm:{id:null,sportType:"",suitableFrequency:"",suitableTime:"",recommendedSpeed:"",suitableHeartRate:""},sportList:[],dialogFormVisible:!1,title:"",total:0,searchModel:{sportType:"",pageNo:1,pageSize:10},rules:{sportType:[{required:!0,validator:function(t,a,s){return e(t,a,s,"运动类型")},trigger:"blur"}],suitableFrequency:[{required:!0,validator:function(t,a,s){return e(t,a,s,"运动频率")},trigger:"blur"}],suitableTime:[{required:!0,validator:function(t,a,s){return e(t,a,s,"运动时间")},trigger:"blur"}],recommendedSpeed:[{required:!0,validator:function(t,a,s){return e(t,a,s,"运动速度")},trigger:"blur"}],suitableHeartRate:[{required:!0,validator:function(t,a,s){return e(t,a,s,"运动心率")},trigger:"blur"}]}}},computed:{dialogWidth:function(){return this.isMobile?"95%":"50%"}},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"even-row":"odd-row"},resetSearch:function(){this.searchModel.sportType="",this.searchModel.pageNo=1,this.getSportList()},checkScreenWidth:function(){this.isMobile=window.innerWidth<768},saveSport:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.sportFormRef.validate();case 3:return e.saveLoading=!0,t.next=6,l["a"].saveSport(e.sportForm);case 6:a=t.sent,e.$message({message:a.message||(e.sportForm.id?"修改成功":"新增成功"),type:"success"}),e.dialogFormVisible=!1,e.getSportList(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),!1===t.t0?console.log("表单验证失败"):(console.error("保存运动信息失败:",t.t0),e.$message.error("操作失败，请稍后重试"));case 15:return t.prev=15,e.saveLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])})))()},clearForm:function(){this.sportForm={id:null,sportType:"",suitableFrequency:"",suitableTime:"",recommendedSpeed:"",suitableHeartRate:""}},handleSizeChange:function(e){this.searchModel.pageSize=e,this.searchModel.pageNo=1,this.getSportList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getSportList()},getSportList:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,l["a"].getSportList(e.searchModel);case 4:a=t.sent,e.sportList=a.data.rows,e.total=a.data.total,t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("获取运动信息列表失败:",t.t0),e.$message.error("获取列表失败"),e.sportList=[],e.total=0;case 15:return t.prev=15,e.listLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,9,15,18]])})))()},openEditUi:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!=e){a.next=6;break}t.title="新增运动信息",t.sportForm={id:null,sportType:"",suitableFrequency:"",suitableTime:"",recommendedSpeed:"",suitableHeartRate:""},t.dialogFormVisible=!0,a.next=19;break;case 6:return t.title="修改运动信息",a.prev=7,a.next=10,l["a"].getSportById(e);case 10:s=a.sent,t.sportForm=Object(r["a"])({},s.data),t.dialogFormVisible=!0,a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](7),console.error("获取运动信息详情失败:",a.t0),t.$message.error("获取详情失败");case 19:case"end":return a.stop()}}),a,null,[[7,15]])})))()},deleteSport:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm('确认删除运动类型 "'.concat(e.sportType,'" 的信息吗？'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"});case 3:return t.listLoading=!0,a.prev=4,a.next=7,l["a"].deleteSportById(e.id);case 7:s=a.sent,t.$message({type:"success",message:s.message||"删除成功"}),t.getSportList(),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](4),console.error("删除运动信息失败:",a.t0),t.$message.error("删除失败");case 16:return a.prev=16,t.listLoading=!1,a.finish(16);case 19:a.next=24;break;case 21:a.prev=21,a.t1=a["catch"](0),t.$message({type:"info",message:"已取消删除"});case 24:case"end":return a.stop()}}),a,null,[[0,21],[4,12,16,19]])})))()}},created:function(){this.checkScreenWidth(),window.addEventListener("resize",this.checkScreenWidth),this.getSportList()},beforeDestroy:function(){window.removeEventListener("resize",this.checkScreenWidth)}},d=c,u=(a("409f"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,"d9183b68",null);t["default"]=p.exports},bd9e:function(e,t,a){},bd9e4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"password-page"},[a("div",{staticClass:"register-form"},[a("h1",[e._v("修改密码")]),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"当前密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入当前密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"新的密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新的密码"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmNewPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入新的密码"},model:{value:e.form.confirmNewPassword,callback:function(t){e.$set(e.form,"confirmNewPassword",t)},expression:"form.confirmNewPassword"}})],1),a("div",{staticClass:"form-actions"},[a("el-button",{staticClass:"back-btn",attrs:{type:"primary",plain:"",icon:"el-icon-back"},on:{click:function(t){return e.$router.push("/dashboard")}}},[e._v("返回")]),a("el-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)])},i=[],r=(a("ac1f"),a("5319"),a("70d8")),o={data:function(){return{form:{username:"",password:"",newPassword:"",confirmNewPassword:"",id:null},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入当前密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新的密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmNewPassword:[{required:!0,message:"确认密码",trigger:"blur"},{validator:this.validateConfirmNewPassword,trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;var a={id:e.id,username:e.form.username,password:e.form.password,newPassword:e.form.newPassword};r["a"].changePassword(a).then((function(t){e.$message({message:t.message,type:"success"}),e.$router.replace("/login")})).catch((function(t){e.$message({message:t.response.data.message,type:"error"})}))}))},validateConfirmNewPassword:function(e,t,a){t!==this.form.newPassword?a(new Error("两次输入的密码不一致")):a()},getUserId:function(){var e=this;r["a"].getUserId().then((function(t){console.log(t),e.id=t.data.userId})).catch((function(e){}))}},created:function(){this.getUserId()}},n=o,l=(a("22a7"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"a39fd980",null);t["default"]=c.exports},be5b:function(e,t,a){},beda:function(e,t,a){},c1f7:function(e,t,a){"use strict";var s,i,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-wrapper",class:e.classObj},["mobile"===e.device&&e.sidebar.opened?a("div",{staticClass:"drawer-bg",on:{click:e.handleClickOutside}}):e._e(),a("sidebar",{staticClass:"sidebar-container"}),a("div",{staticClass:"main-container"},[a("div",{class:{"fixed-header":e.fixedHeader}},[a("navbar"),a("tagsView")],1),a("app-main")],1)],1)},o=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar"},[a("hamburger",{staticClass:"hamburger-container",attrs:{"is-active":e.sidebar.opened},on:{toggleClick:e.toggleSideBar}}),a("breadcrumb",{staticClass:"breadcrumb-container"}),a("div",{staticClass:"right-menu"},[a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("img",{staticClass:"user-avatar",attrs:{src:e.avatar}}),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/change-password"}},[a("el-dropdown-item",[e._v(" 修改密码 ")])],1),a("router-link",{attrs:{to:"/dashboard"}},[a("el-dropdown-item",[e._v("主页")])],1),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[a("span",{staticStyle:{display:"block"}},[e._v("退出账户")])])],1)],1)],1)],1)},l=[],c=a("c7eb"),d=a("1da1"),u=a("5530"),p=a("2f62"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[a("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.levelList,(function(t,s){return a("el-breadcrumb-item",{key:t.path},["noRedirect"===t.redirect||s==e.levelList.length-1?a("span",{staticClass:"no-redirect"},[e._v(e._s(t.meta.title))]):a("a",{on:{click:function(a){return a.preventDefault(),e.handleLink(t)}}},[e._v(e._s(t.meta.title))])])})),1)],1)},f=[],h=(a("99af"),a("4de4"),a("b0c0"),a("d3b7"),a("498a"),a("bd11")),b=a.n(h),g={data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this.$route.matched.filter((function(e){return e.meta&&e.meta.title})),t=e[0];this.isDashboard(t)||(e=[{path:"/dashboard",meta:{title:"首页"}}].concat(e)),this.levelList=e.filter((function(e){return e.meta&&e.meta.title&&!1!==e.meta.breadcrumb}))},isDashboard:function(e){var t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase()},pathCompile:function(e){var t=this.$route.params,a=b.a.compile(e);return a(t)},handleLink:function(e){var t=e.redirect,a=e.path;t?this.$router.push(t):this.$router.push(this.pathCompile(a))}}},v=g,y=(a("040f"),a("2877")),w=Object(y["a"])(v,m,f,!1,null,"0428f1be",null),C=w.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hamburger-container",on:{click:e.toggleClick}},[a("svg",{staticClass:"hamburger",class:{"is-active":e.isActive},attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64","aria-hidden":"true",role:"img"}},[a("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})])])},_=[],k={name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},methods:{toggleClick:function(){this.$emit("toggleClick")}}},S=k,I=(a("67a2"),Object(y["a"])(S,x,_,!1,null,"b2079cf0",null)),L=I.exports,O={components:{Breadcrumb:C,Hamburger:L},computed:Object(u["a"])({},Object(p["b"])(["sidebar","avatar"])),methods:{toggleSideBar:function(){this.$store.dispatch("app/toggleSideBar")},logout:function(){var e=this;return Object(d["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:return e.$router.push("/login?redirect=".concat(e.$route.fullPath)),t.next=5,e.$store.dispatch("tagsView/delAllViews");case 5:sessionStorage.removeItem("tabViews");case 6:case"end":return t.stop()}}),t)})))()}}},F=O,$=(a("ff08"),Object(y["a"])(F,n,l,!1,null,"035588e8",null)),T=$.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-container",class:{"has-logo":e.showLogo}},[e.showLogo?a("logo",{attrs:{collapse:e.isCollapse}}):e._e(),a("el-scrollbar",{staticClass:"sidebar-scrollbar",attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-menu",{attrs:{"default-active":e.activeMenu,collapse:e.isCollapse,"background-color":e.variables.menuBg,"text-color":e.variables.menuText,"unique-opened":!1,"active-text-color":e.variables.menuActiveText,"collapse-transition":!1,"default-openeds":e.defaultOpeneds,mode:"vertical"}},e._l(e.routes,(function(e){return a("sidebar-item",{key:e.path,attrs:{item:e,"base-path":e.path}})})),1)],1)],1)},E=[],M=a("2909"),B=(a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-logo-container",class:{collapse:e.collapse}},[a("transition",{attrs:{name:"sidebarLogoFade"}},[e.collapse?a("router-link",{key:"collapse",staticClass:"sidebar-logo-link",attrs:{to:"/"}},[e.logo?a("img",{staticClass:"sidebar-logo",attrs:{src:e.logo}}):a("h1",{staticClass:"sidebar-title"},[e._v(e._s(e.title)+" ")])]):a("router-link",{key:"expand",staticClass:"sidebar-logo-link",attrs:{to:"/"}},[e.logo?a("img",{staticClass:"sidebar-logo",attrs:{src:e.logo}}):e._e(),a("h1",{staticClass:"sidebar-title"},[e._v(e._s(e.title)+" ")])])],1)],1)}),D=[],V={name:"SidebarLogo",props:{collapse:{type:Boolean,required:!0}},data:function(){return{title:"健康管理系统",logo:"https://wpimg.wallstcn.com/69a1c46c-eb1c-4b46-8bd4-e9e686ef5251.png"}}},z=V,R=(a("b677"),Object(y["a"])(z,B,D,!1,null,"42cf40be",null)),N=R.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item.hidden?e._e():a("div",[!e.hasOneShowingChild(e.item.children,e.item)||e.onlyOneChild.children&&!e.onlyOneChild.noShowingChildren||e.item.alwaysShow?a("el-submenu",{ref:"subMenu",attrs:{index:e.resolvePath(e.item.path),"popper-append-to-body":""}},[a("template",{slot:"title"},[e.item.meta?a("item",{attrs:{icon:e.item.meta&&e.item.meta.icon,title:e.item.meta.title}}):e._e()],1),e._l(e.item.children,(function(t){return a("sidebar-item",{key:t.path,staticClass:"nest-menu",attrs:{"is-nest":!0,item:t,"base-path":e.resolvePath(t.path)}})}))],2):[e.onlyOneChild.meta?a("app-link",{attrs:{to:e.resolvePath(e.onlyOneChild.path)}},[a("el-menu-item",{class:{"submenu-title-noDropdown":!e.isNest},attrs:{index:e.resolvePath(e.onlyOneChild.path)}},[a("item",{attrs:{icon:e.onlyOneChild.meta.icon||e.item.meta&&e.item.meta.icon,title:e.onlyOneChild.meta.title}})],1)],1):e._e()]],2)},A=[],W=a("df7c"),U=a.n(W),H=a("61f7"),q={name:"MenuItem",functional:!0,props:{icon:{type:String,default:""},title:{type:String,default:""}},render:function(e,t){var a=t.props,s=a.icon,i=a.title,r=[];return s&&r.push(e("i",{class:[s,"sub-el-icon"],style:"font-size: 18px; color: #5e6d82;"})),i&&r.push(e("span",{slot:"title",style:"font-size: 14px; font-weight: 500;"},[" ",i])),r}},Q=q,G=(a("a227"),Object(y["a"])(Q,s,i,!1,null,"436f0cd3",null)),K=G.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.type,e._b({tag:"component"},"component",e.linkProps(e.to),!1),[e._t("default")],2)},Y=[],Z={props:{to:{type:String,required:!0}},computed:{isExternal:function(){return Object(H["a"])(this.to)},type:function(){return this.isExternal?"a":"router-link"}},methods:{linkProps:function(e){return this.isExternal?{href:e,target:"_blank",rel:"noopener"}:{to:e}}}},X=Z,ee=Object(y["a"])(X,J,Y,!1,null,null,null),te=ee.exports,ae={computed:{device:function(){return this.$store.state.app.device}},mounted:function(){this.fixBugIniOS()},methods:{fixBugIniOS:function(){var e=this;try{var t=this.$refs.subMenu;if(t&&t.handleMouseleave){var a=t.handleMouseleave;t.handleMouseleave=function(t){"mobile"!==e.device&&a(t)}}}catch(s){console.error("修复iOS菜单bug时出错:",s)}}}},se={name:"SidebarItem",components:{Item:K,AppLink:te},mixins:[ae],props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data:function(){return this.onlyOneChild=null,{}},methods:{hasOneShowingChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,s=t.filter((function(t){return!t.hidden&&(e.onlyOneChild=t,!0)}));return 1===s.length||0===s.length&&(this.onlyOneChild=Object(u["a"])(Object(u["a"])({},a),{},{path:"",noShowingChildren:!0}),!0)},resolvePath:function(e){return Object(H["a"])(e)?e:Object(H["a"])(this.basePath)?this.basePath:U.a.resolve(this.basePath,e)}}},ie=se,re=Object(y["a"])(ie,P,A,!1,null,null,null),oe=re.exports,ne=a("cf1e"),le=a.n(ne),ce={name:"Sidebar",components:{SidebarItem:oe,Logo:N},data:function(){return{defaultOpeneds:[]}},methods:{generateDefaultOpeneds:function(){var e=this;this.$watch("routes",(function(t){t&&t.length>0&&(e.defaultOpeneds=e.getMenuIds(t))}),{immediate:!0})},getMenuIds:function(e){var t=this,a=[];return e&&0!==e.length?(e.forEach((function(e){e.path&&a.push(e.path),e.children&&e.children.length>0&&a.push.apply(a,Object(M["a"])(t.getMenuIds(e.children)))})),a):a}},created:function(){this.generateDefaultOpeneds()},computed:Object(u["a"])(Object(u["a"])({},Object(p["b"])(["sidebar","menuList"])),{},{routes:function(){return this.menuList||[]},activeMenu:function(){var e=this.$route,t=e.meta,a=e.path;return t&&t.activeMenu?t.activeMenu:a},showLogo:function(){return this.$store.state.settings.sidebarLogo},variables:function(){return le.a},isCollapse:function(){return!this.sidebar.opened}})},de=ce,ue=(a("ad53"),Object(y["a"])(de,j,E,!1,null,"747143ac",null)),pe=ue.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"app-main"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("keep-alive",{attrs:{include:e.cachedViews}},[a("router-view",{key:e.key})],1)],1)],1)},fe=[],he={name:"AppMain",computed:{key:function(){return this.$route.path},cachedViews:function(){return this.$store.state.tagsView.cachedViews||[]}}},be=he,ge=(a("600a"),a("6dd4"),Object(y["a"])(be,me,fe,!1,null,"9fb83110",null)),ve=ge.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},[a("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},e._l(e.visitedViews,(function(t){return a("router-link",{key:t.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:e.isActive(t)?"active":"",attrs:{to:{path:t.path,query:t.query,fullPath:t.fullPath},tag:"span"},nativeOn:{mouseup:function(a){return"button"in a&&1!==a.button?null:e.closeSelectedTag(t)},contextmenu:function(a){return a.preventDefault(),e.openMenu(t,a)}}},[e._v(" "+e._s(t.title)+" "),t.meta.affix?e._e():a("span",{staticClass:"el-icon-close",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.closeSelectedTag(t)}}})])})),1),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[e.selectedTag.meta&&e.selectedTag.meta.affix?e._e():a("li",{on:{click:function(t){return e.closeSelectedTag(e.selectedTag)}}},[e._v("关闭")]),a("li",{on:{click:e.closeOthersTags}},[e._v("关闭其它")]),a("li",{on:{click:function(t){return e.closeAllTags(e.selectedTag)}}},[e._v("关闭所有")])])],1)},we=[],Ce=a("b85c"),xe=(a("d81d"),a("fb6a"),a("e9c4"),a("b64b"),a("ac1f"),a("5319"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(t){return t.preventDefault(),e.handleScroll(t)}}},[e._t("default")],2)}),_e=[],ke=(a("c740"),4),Se={name:"ScrollPane",data:function(){return{left:0}},computed:{scrollWrapper:function(){return this.$refs.scrollContainer.$refs.wrap}},methods:{handleScroll:function(e){var t=e.wheelDelta||40*-e.deltaY,a=this.scrollWrapper;a.scrollLeft=a.scrollLeft+t/4},moveToTarget:function(e){var t=this.$refs.scrollContainer.$el,a=t.offsetWidth,s=this.scrollWrapper,i=this.$parent.$refs.tag,r=null,o=null;if(i.length>0&&(r=i[0],o=i[i.length-1]),r===e)s.scrollLeft=0;else if(o===e)s.scrollLeft=s.scrollWidth-a;else{var n=i.findIndex((function(t){return t===e})),l=i[n-1],c=i[n+1],d=c.$el.offsetLeft+c.$el.offsetWidth+ke,u=l.$el.offsetLeft-ke;d>s.scrollLeft+a?s.scrollLeft=d-a:u<s.scrollLeft&&(s.scrollLeft=u)}}}},Ie=Se,Le=(a("6633"),Object(y["a"])(Ie,xe,_e,!1,null,"c3859eee",null)),Oe=Le.exports,Fe={components:{ScrollPane:Oe},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addTags(),this.moveToCurrentTag()},visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags(),this.tagsViewCache()},methods:{isActive:function(e){return e.path===this.$route.path},filterAffixTags:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",s=[];return this.routes&&e.forEach((function(e){if(e.meta&&e.meta.affix){var i=U.a.resolve(a,e.path);s.push({fullPath:i,path:i,name:e.name,meta:Object(u["a"])({},e.meta)})}if(e.children){var r=t.filterAffixTags(e.children,e.path);r.length>=1&&(s=[].concat(Object(M["a"])(s),Object(M["a"])(r)))}})),s},initTags:function(){var e,t=this.affixTags=this.filterAffixTags(this.routes),a=Object(Ce["a"])(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.name&&this.$store.dispatch("tagsView/addVisitedView",s)}}catch(i){a.e(i)}finally{a.f()}},addTags:function(){var e=this.$route.name;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag:function(){var e=this,t=this.$refs.tag;this.$nextTick((function(){var a,s=Object(Ce["a"])(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(i.to.path===e.$route.path){e.$refs.scrollPane.moveToTarget(i),i.to.fullPath!==e.$route.fullPath&&e.$store.dispatch("tagsView/updateVisitedView",e.$route);break}}}catch(r){s.e(r)}finally{s.f()}}))},refreshSelectedTag:function(e){var t=this;this.$store.dispatch("tagsView/delCachedView",e).then((function(){var a=e.fullPath;t.$nextTick((function(){t.$router.replace({path:"/redirect"+a})}))}))},closeSelectedTag:function(e){var t=this;this.$store.dispatch("tagsView/delView",e).then((function(a){var s=a.visitedViews;t.isActive(e)&&t.toLastView(s,e)}))},closeOthersTags:function(){var e=this;this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((function(){e.moveToCurrentTag()}))},closeAllTags:function(e){var t=this;this.$store.dispatch("tagsView/delAllViews").then((function(a){var s=a.visitedViews;t.affixTags.some((function(t){return t.path===e.path}))||t.toLastView(s,e)}))},toLastView:function(e,t){var a=e.slice(-1)[0];a?this.$router.push(a):"Dashboard"===t.name?this.$router.replace({path:"/redirect"+t.fullPath}):this.$router.push("/")},openMenu:function(e,t){var a=105,s=this.$el.getBoundingClientRect().left,i=this.$el.offsetWidth,r=i-a,o=t.clientX-s+15;this.left=o>r?r:o,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu:function(){this.visible=!1},tagsViewCache:function(){var e=this;window.addEventListener("beforeunload",(function(){var t=e.visitedViews.map((function(e){return{fullPath:e.fullPath,hash:e.hash,meta:Object(u["a"])({},e.meta),name:e.name,params:Object(u["a"])({},e.params),path:e.path,query:Object(u["a"])({},e.query),title:e.title}}));sessionStorage.setItem("tabViews",JSON.stringify(t))}));var t=JSON.parse(sessionStorage.getItem("tabViews"))||[];t.length>0&&(this.$store.state.tagsView.visitedViews=t)}}},$e=Fe,Te=(a("9608"),a("ce4c"),Object(y["a"])($e,ye,we,!1,null,"65839d87",null)),je=Te.exports,Ee=a("4360"),Me=document,Be=Me.body,De=992,Ve={watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&Ee["a"].dispatch("app/closeSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var e=this.$_isMobile();e&&(Ee["a"].dispatch("app/toggleDevice","mobile"),Ee["a"].dispatch("app/closeSideBar",{withoutAnimation:!0}))},methods:{$_isMobile:function(){var e=Be.getBoundingClientRect();return e.width-1<De},$_resizeHandler:function(){if(!document.hidden){var e=this.$_isMobile();Ee["a"].dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&Ee["a"].dispatch("app/closeSideBar",{withoutAnimation:!0})}}}},ze={name:"Layout",components:{Navbar:T,Sidebar:pe,AppMain:ve,TagsView:je},mixins:[Ve],computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},fixedHeader:function(){return this.$store.state.settings.fixedHeader},classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}},methods:{handleClickOutside:function(){this.$store.dispatch("app/closeSideBar",{withoutAnimation:!1})}}},Re=ze,Ne=(a("8158"),Object(y["a"])(Re,r,o,!1,null,"3de9e57f",null));t["a"]=Ne.exports},ca2c:function(e,t,a){},cb75:function(e,t,a){},cbb5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log-container"},[e._m(0),a("div",{staticClass:"log-toolbar"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"输入姓名、手机号等进行搜索","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[a("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.onSearch},slot:"append"},[e._v("搜索")])],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加记录")])],1),a("el-card",{staticClass:"log-card",attrs:{shadow:"hover"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.bodyList,stripe:"",border:"","empty-text":e.loading?"加载中...":"暂无数据","element-loading-text":"数据加载中...","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"上传时间",width:"120",formatter:e.formatDate,align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"70",align:"center"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"70",align:"center"}}),a("el-table-column",{attrs:{prop:"height",label:"身高(cm)",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"weight",label:"体重(kg)",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"bloodSugar",label:"血糖",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"bloodPressure",label:"血压",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"bloodLipid",label:"血脂",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"heartRate",label:"心率/分钟",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"vision",label:"视力",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"sleepDuration",label:"睡眠时长",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"sleepQuality",label:"睡眠质量",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"smoking",label:"抽烟",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.smoking?"danger":"success",effect:"plain"}},[e._v(" "+e._s(t.row.smoking?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"drinking",label:"喝酒",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.drinking?"warning":"success",effect:"plain"}},[e._v(" "+e._s(t.row.drinking?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"exercise",label:"运动",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.exercise?"primary":"info",effect:"plain"}},[e._v(" "+e._s(t.row.exercise?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"foodTypes",label:"喜好食物",width:"120",align:"center"}}),a("el-table-column",{attrs:{prop:"waterConsumption",label:"饮水量",width:"90",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return e.openEditUi(t.row.notesid)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return e.deleteUserBody(t.row)}}})],1)]}}])})],1),e.loading||0!==e.bodyList.length?e._e():a("div",{staticClass:"empty-state"},[a("i",{staticClass:"el-icon-document-remove empty-icon"}),a("div",{staticClass:"empty-title"},[e._v("暂无健康日志数据")]),a("div",{staticClass:"empty-subtitle"},[e._v("请先添加数据或调整筛选条件")])])],1),a("el-dialog",{attrs:{title:"编辑健康信息",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"bodyFormRef",attrs:{model:e.bodyForm}},[a("el-form-item",{attrs:{label:"昵称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.name,callback:function(t){e.$set(e.bodyForm,"name",t)},expression:"bodyForm.name"}})],1),a("el-form-item",{attrs:{label:"年龄",prop:"age","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.age,callback:function(t){e.$set(e.bodyForm,"age",t)},expression:"bodyForm.age"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.gender,callback:function(t){e.$set(e.bodyForm,"gender",t)},expression:"bodyForm.gender"}})],1),a("el-form-item",{attrs:{label:"身高/cm",prop:"height","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.height,callback:function(t){e.$set(e.bodyForm,"height",t)},expression:"bodyForm.height"}})],1),a("el-form-item",{attrs:{label:"体重/kg",prop:"weight","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.weight,callback:function(t){e.$set(e.bodyForm,"weight",t)},expression:"bodyForm.weight"}})],1),a("el-form-item",{attrs:{label:"血糖",prop:"bloodSugar","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.bloodSugar,callback:function(t){e.$set(e.bodyForm,"bloodSugar",t)},expression:"bodyForm.bloodSugar"}})],1),a("el-form-item",{attrs:{label:"血压",prop:"bloodPressure","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.bloodPressure,callback:function(t){e.$set(e.bodyForm,"bloodPressure",t)},expression:"bodyForm.bloodPressure"}})],1),a("el-form-item",{attrs:{label:"血脂",prop:"bloodLipid","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.bloodLipid,callback:function(t){e.$set(e.bodyForm,"bloodLipid",t)},expression:"bodyForm.bloodLipid"}})],1),a("el-form-item",{attrs:{label:"心率/分钟",prop:"heartRate","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.heartRate,callback:function(t){e.$set(e.bodyForm,"heartRate",t)},expression:"bodyForm.heartRate"}})],1),a("el-form-item",{attrs:{label:"视力",prop:"vision","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.vision,callback:function(t){e.$set(e.bodyForm,"vision",t)},expression:"bodyForm.vision"}})],1),a("el-form-item",{attrs:{label:"睡眠时长/h",prop:"sleepDuration","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.sleepDuration,callback:function(t){e.$set(e.bodyForm,"sleepDuration",t)},expression:"bodyForm.sleepDuration"}})],1),a("el-form-item",{attrs:{label:"睡眠质量",prop:"sleepQuality","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.bodyForm.sleepQuality,callback:function(t){e.$set(e.bodyForm,"sleepQuality",t)},expression:"bodyForm.sleepQuality"}},[a("el-radio",{attrs:{label:1}},[e._v("好")]),a("el-radio",{attrs:{label:2}},[e._v("一般")]),a("el-radio",{attrs:{label:3}},[e._v("差")])],1)],1),a("el-form-item",{attrs:{label:"是否吸烟",prop:"smoking","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.bodyForm.smoking,callback:function(t){e.$set(e.bodyForm,"smoking",t)},expression:"bodyForm.smoking"}})],1),a("el-form-item",{attrs:{label:"是否喝酒",prop:"drinking","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.bodyForm.drinking,callback:function(t){e.$set(e.bodyForm,"drinking",t)},expression:"bodyForm.drinking"}})],1),a("el-form-item",{attrs:{label:"是否运动",prop:"exercise","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.bodyForm.exercise,callback:function(t){e.$set(e.bodyForm,"exercise",t)},expression:"bodyForm.exercise"}})],1),a("el-form-item",{attrs:{label:"喜好食物",prop:"foodTypes","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择摄入较多的食物种类"},model:{value:e.bodyForm.foodTypes,callback:function(t){e.$set(e.bodyForm,"foodTypes",t)},expression:"bodyForm.foodTypes"}},[a("el-option",{attrs:{label:"蔬菜",value:"蔬菜"}}),a("el-option",{attrs:{label:"水果",value:"水果"}}),a("el-option",{attrs:{label:"肉类",value:"肉类"}}),a("el-option",{attrs:{label:"鱼类",value:"鱼类"}}),a("el-option",{attrs:{label:"豆类",value:"豆类"}}),a("el-option",{attrs:{label:"谷物",value:"谷物"}})],1)],1),a("el-form-item",{attrs:{label:"饮水量/ml",prop:"waterConsumption","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.waterConsumption,callback:function(t){e.$set(e.bodyForm,"waterConsumption",t)},expression:"bodyForm.waterConsumption"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateBody}},[e._v("确 定")])],1)],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log-header"},[a("h1",{staticClass:"main-title"},[e._v("健康数据日志")]),a("p",{staticClass:"subtitle"},[e._v("管理并回顾您的身体健康信息，支持多维度筛选与操作")])])}],r=(a("b0c0"),a("70d8")),o={data:function(){return{bodyForm:{},bodyList:[],formLabelWidth:"135px",dialogFormVisible:!1,title:"",total:0,searchModel:{pageNo:1,pageSize:10},rules:{bodyType:[{required:!0,message:"请输入运动类型",trigger:"blur"}]}}},methods:{updateBody:function(){var e=this,t=!0;if(this.$refs.bodyFormRef.validate((function(e){t=e})),!t)return console.log("error submit!!"),!1;r["a"].updateUserBody(this.bodyForm).then((function(t){e.$message({message:t.message,type:"success"}),e.dialogFormVisible=!1,e.getUserBodyList()}))},clearForm:function(){this.bodyForm={},this.$refs.bodyFormRef.clearValidate()},handleSizeChange:function(e){this.searchModel.pageSize=e,this.getUserBodyList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getUserBodyList()},getUserBodyList:function(){var e=this;r["a"].getUserBodyList(this.searchModel).then((function(t){console.log(t),e.bodyList=t.data.rows,e.total=t.data.total,console.log(e.bodyList)}))},openEditUi:function(e){var t=this;console.log(e),this.title="修改身体信息",r["a"].getUserBodyById(e).then((function(e){t.bodyForm=e.data})),this.dialogFormVisible=!0},deleteUserBody:function(e){var t=this;this.$confirm("确认删除 ".concat(e.name," 这个身体信息吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].deleteUserBodyById(e.notesid).then((function(e){t.$message({type:"success",message:e.message}),t.getUserBodyList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},formatDate:function(e,t,a,s){var i=new Date(a);return i.toLocaleDateString()}},created:function(){this.getUserBodyList()}},n=o,l=(a("4c3d"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"b245a31a",null);t["default"]=c.exports},cbc6:function(e,t,a){"use strict";a("62bf")},ce4c:function(e,t,a){"use strict";a("13d4")},cf1e:function(e,t,a){e.exports={primary:"#42b983",secondary:"#1e88e5",success:"#4caf50",warning:"#ff9800",danger:"#f44336",info:"#00bcd4",textPrimary:"#2c3e50",textRegular:"#5e6d82",textSecondary:"#909399",bgColor:"#f5f7fa",cardBg:"#fff",disabledBg:"#f5f7fa",menuText:"#5e6d82",menuActiveText:"#42b983",subMenuActiveText:"#359368",menuBg:"#f8fafc",menuHover:"rgba(66,185,131,.1)",subMenuBg:"#f1f7fc",subMenuHover:"rgba(30,136,229,.1)",sideBarWidth:"220px"}},d0e8:function(e,t,a){},d25c:function(e,t,a){},d6ba:function(e,t,a){},d791:function(e,t,a){},dff6:function(e,t,a){},e13c:function(e,t,a){"use strict";a("beda")},e7ed:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-manage-container"},[e._m(0),a("el-card",{staticClass:"search-card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:18,md:18}},[a("div",{staticClass:"search-controls"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入用户名搜索",clearable:"","prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList(t)}},model:{value:e.searchModel.username,callback:function(t){e.$set(e.searchModel,"username","string"===typeof t?t.trim():t)},expression:"searchModel.username"}}),a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入手机号搜索",clearable:"","prefix-icon":"el-icon-mobile-phone"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList(t)}},model:{value:e.searchModel.phone,callback:function(t){e.$set(e.searchModel,"phone","string"===typeof t?t.trim():t)},expression:"searchModel.phone"}}),a("el-button",{attrs:{type:"primary",loading:e.listLoading},on:{click:e.getUserList}},[e._v("查询")]),a("el-button",{attrs:{plain:"",icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v("重置")])],1)]),a("el-col",{staticClass:"action-col",attrs:{xs:24,sm:6,md:6}},[a("el-button",{staticClass:"add-btn",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("新增用户")])],1)],1)],1),a("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户信息列表")]),a("span",{staticClass:"data-count"},[e._v("共 "+e._s(e.total)+" 条记录")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:"","row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","header-cell-style":{backgroundColor:"#f5f7fa",color:"#606266",fontWeight:"bold"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",effect:"plain",type:"primary"}},[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.phone?a("span",[a("i",{staticClass:"el-icon-mobile-phone"}),e._v(" "+e._s(t.row.phone)+" ")]):a("span",{staticClass:"no-data"},[e._v("未设置")])]}}])}),a("el-table-column",{attrs:{prop:"email",label:"电子邮件","min-width":"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.email?a("span",[a("i",{staticClass:"el-icon-message"}),e._v(" "+e._s(t.row.email)+" ")]):a("span",{staticClass:"no-data"},[e._v("未设置")])]}}])}),a("el-table-column",{attrs:{label:"角色","min-width":"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.roleName?a("el-tag",{attrs:{size:"medium",type:"success",effect:"dark"}},[e._v(e._s(t.row.roleName))]):a("el-tag",{attrs:{size:"medium",type:"info"}},[e._v("未分配角色")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return e.openEditUi(t.row.id)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return e.deleteUser(t.row)}}})],1)]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"empty-data"},[a("i",{staticClass:"el-icon-user"}),a("p",[e._v("暂无用户数据")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("添加用户")])],1)])],2),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth,fullscreen:e.isMobile,top:"5vh","destroy-on-close":"","close-on-click-modal":!1},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"userFormRef",staticClass:"user-form",attrs:{model:e.userForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户名","prefix-icon":"el-icon-user",maxlength:"20","show-word-limit":""},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e.userForm.id?e._e():a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off","show-password":"",placeholder:"请输入密码，长度在6-20个字符","prefix-icon":"el-icon-lock",maxlength:"20"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}}),e.userForm.password?a("div",{staticClass:"password-strength"},[a("span",[e._v("密码强度：")]),a("span",{class:e.passwordStrengthClass},[e._v(e._s(e.passwordStrength))])]):e._e()],1),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入手机号码","prefix-icon":"el-icon-mobile-phone"},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),a("el-form-item",{attrs:{label:"电子邮件",prop:"email"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入电子邮箱地址","prefix-icon":"el-icon-message"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),a("el-form-item",{attrs:{label:"用户角色",prop:"roleId"}},[a("div",{staticClass:"role-selection"},[a("el-radio-group",{model:{value:e.userForm.roleId,callback:function(t){e.$set(e.userForm,"roleId",t)},expression:"userForm.roleId"}},e._l(e.allRoleList,(function(t){return a("el-radio",{key:t.roleId,staticClass:"role-radio",attrs:{label:t.roleId}},[a("span",{staticClass:"role-name"},[e._v(e._s(t.roleDesc))])])})),1)],1)]),e.userForm.id?e._e():a("div",{staticClass:"form-tips"},[a("i",{staticClass:"el-icon-info"}),a("span",[e._v("用户创建后，可以通过“修改密码”功能重置密码")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveUser}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[e._v("用户管理")]),a("p",{staticClass:"page-description"},[e._v("管理系统用户信息，包括用户添加、编辑、删除及权限分配")])])}],r=a("5530"),o=a("c7eb"),n=a("1da1"),l=(a("ac1f"),a("00b4"),a("70d8")),c=a("67d5"),d=/^1[3-9]\d{9}$/,u=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/,p={name:"UserManagement",data:function(){var e=this,t=function(e,t,a){return t?t.length<2||t.length>20?a(new Error("长度需在 2 到 20 个字符")):void a():a(new Error("请输入用户名"))},a=function(t,a,s){if(!e.userForm.id){if(!a)return s(new Error("请输入密码"));if(a.length<6||a.length>20)return s(new Error("长度需在 6 到 20 个字符"))}s()},s=function(e,t,a){if(t&&!d.test(t))return a(new Error("请输入有效的手机号"));a()},i=function(e,t,a){return t?u.test(t)?void a():a(new Error("请输入有效的电子邮件地址")):a(new Error("请输入电子邮件"))},r=function(e,t,a){if(!t)return a(new Error("请为用户分配角色"));a()};return{isMobile:!1,listLoading:!1,saveLoading:!1,userForm:{id:null,username:"",password:"",phone:"",email:"",roleId:null},allRoleList:[],userList:[],dialogFormVisible:!1,title:"",total:0,searchModel:{username:"",phone:"",pageNo:1,pageSize:10},rules:{username:[{required:!0,validator:t,trigger:"blur"}],password:[{validator:a,trigger:"blur"}],phone:[{validator:s,trigger:"blur"}],email:[{required:!0,validator:i,trigger:"blur"}],roleId:[{required:!0,validator:r,trigger:"change"}]}}},computed:{dialogWidth:function(){return this.isMobile?"95%":"50%"},passwordStrength:function(){var e=this.userForm.password||"";if(!e)return"";var t=0;return e.length>=8&&(t+=1),e.length>=12&&(t+=1),/[A-Z]/.test(e)&&(t+=1),/[a-z]/.test(e)&&(t+=1),/[0-9]/.test(e)&&(t+=1),/[^A-Za-z0-9]/.test(e)&&(t+=1),t<=2?"弱":t<=4?"中":"强"},passwordStrengthClass:function(){var e=this.passwordStrength;return"弱"===e?"strength-weak":"中"===e?"strength-medium":"强"===e?"strength-strong":""}},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"even-row":"odd-row"},resetSearch:function(){this.searchModel.username="",this.searchModel.phone="",this.searchModel.pageNo=1,this.getUserList()},checkScreenWidth:function(){this.isMobile=window.innerWidth<768},getAllRoleList:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getAllRoleList();case 3:a=t.sent,e.allRoleList=a.data||[],t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("获取所有角色列表失败:",t.t0),e.$message.error("获取角色数据失败"),e.allRoleList=[];case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveUser:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.userFormRef.validate();case 3:return e.saveLoading=!0,a=Object(r["a"])({},e.userForm),a.roleId?a.roleIdList=[a.roleId]:a.roleIdList=[],t.next=8,l["a"].saveUser(a);case 8:s=t.sent,e.$message({message:s.message||(e.userForm.id?"修改成功":"新增成功"),type:"success"}),e.dialogFormVisible=!1,e.getUserList(),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),!1===t.t0?console.log("表单验证失败"):(console.error("保存用户信息失败:",t.t0),e.$message.error("操作失败，请稍后重试"));case 17:return t.prev=17,e.saveLoading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})))()},clearForm:function(){this.userForm={id:null,username:"",password:"",phone:"",email:"",roleId:null}},handleSizeChange:function(e){this.searchModel.pageSize=e,this.searchModel.pageNo=1,this.getUserList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getUserList()},getUserList:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,l["a"].getUserList(e.searchModel);case 4:a=t.sent,e.userList=a.data.rows,e.total=a.data.total,t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("获取用户列表失败:",t.t0),e.$message.error("获取用户列表失败"),e.userList=[],e.total=0;case 15:return t.prev=15,e.listLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,9,15,18]])})))()},openEditUi:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s,i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.allRoleList.length){a.next=3;break}return a.next=3,t.getAllRoleList();case 3:if(null!=e){a.next=9;break}t.title="新增用户",t.userForm={id:null,username:"",password:"",phone:"",email:"",roleId:null},t.dialogFormVisible=!0,a.next=25;break;case 9:return t.title="修改用户",a.prev=10,a.next=13,l["a"].getUserById(e);case 13:s=a.sent,i=Object(r["a"])({},s.data),i.roleIdList&&i.roleIdList.length>0?i.roleId=i.roleIdList[0]:i.roleId=null,t.userForm=i,t.userForm.password="",t.dialogFormVisible=!0,a.next=25;break;case 21:a.prev=21,a.t0=a["catch"](10),console.error("获取用户详情失败:",a.t0),t.$message.error("获取用户详情失败");case 25:case"end":return a.stop()}}),a,null,[[10,21]])})))()},deleteUser:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm('确认删除用户 "'.concat(e.username,'" 吗？'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"});case 3:return t.listLoading=!0,a.prev=4,a.next=7,l["a"].deleteUserById(e.id);case 7:s=a.sent,t.$message({type:"success",message:s.message||"删除成功"}),1===t.userList.length&&t.searchModel.pageNo>1&&t.searchModel.pageNo--,t.getUserList(),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](4),console.error("删除用户失败:",a.t0),t.$message.error("删除失败");case 17:return a.prev=17,t.listLoading=!1,a.finish(17);case 20:a.next=25;break;case 22:a.prev=22,a.t1=a["catch"](0),t.$message({type:"info",message:"已取消删除"});case 25:case"end":return a.stop()}}),a,null,[[0,22],[4,13,17,20]])})))()}},created:function(){this.checkScreenWidth(),window.addEventListener("resize",this.checkScreenWidth),this.getUserList(),this.getAllRoleList()},beforeDestroy:function(){window.removeEventListener("resize",this.checkScreenWidth)}},m=p,f=(a("b6ef"),a("2877")),h=Object(f["a"])(m,s,i,!1,null,"0a3e14ad",null);t["default"]=h.exports},ea4d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-manage-container"},[e._m(0),a("el-card",{staticClass:"search-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"search-area"},[a("div",{staticClass:"search-title"},[a("i",{staticClass:"el-icon-search"}),a("span",[e._v("搜索过滤")])]),a("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.searchModel},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getBodyList(t)}}},[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称","prefix-icon":"el-icon-user",clearable:""},model:{value:e.searchModel.name,callback:function(t){e.$set(e.searchModel,"name","string"===typeof t?t.trim():t)},expression:"searchModel.name"}})],1),a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{placeholder:"请输入用户ID","prefix-icon":"el-icon-key",clearable:""},model:{value:e.searchModel.id,callback:function(t){e.$set(e.searchModel,"id",t)},expression:"searchModel.id"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.searchModel.gender,callback:function(t){e.$set(e.searchModel,"gender",t)},expression:"searchModel.gender"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1),a("el-form-item",{attrs:{label:"健康状态"}},[a("el-select",{attrs:{placeholder:"请选择健康状态",clearable:""},model:{value:e.searchModel.healthStatus,callback:function(t){e.$set(e.searchModel,"healthStatus",t)},expression:"searchModel.healthStatus"}},[a("el-option",{attrs:{label:"良好",value:"good"}}),a("el-option",{attrs:{label:"一般",value:"normal"}}),a("el-option",{attrs:{label:"需注意",value:"warning"}})],1)],1),a("el-form-item",{staticClass:"search-buttons"},[a("el-button",{attrs:{type:"primary",loading:e.listLoading},on:{click:e.getBodyList}},[e._v("查询")]),a("el-button",{attrs:{type:"info",icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddUi}},[e._v("添加")])],1)],1)],1)]),a("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户身体数据列表")]),a("span",{staticClass:"data-count"},[e._v("共 "+e._s(e.total)+" 条记录")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.bodyList,stripe:"","row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","header-cell-style":{background:"#f5f7fa",color:"#606266",fontWeight:"bold"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{staticClass:"expanded-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"health-summary"},[a("h4",[e._v("健康指标概要")]),a("el-tag",{staticClass:"health-tag",attrs:{type:e.getHealthStatus(t.row),effect:"plain"}},[e._v(" "+e._s("success"===e.getHealthStatus(t.row)?"健康状态良好":"warning"===e.getHealthStatus(t.row)?"健康状态一般":"健康状态需注意")+" ")])],1)]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("血糖：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.bloodSugar||"-"))])])]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("血压：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.bloodPressure||"-"))])])]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("血脂：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.bloodLipid||"-"))])])]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("视力：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.vision||"-"))])])]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("饮水量：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.waterConsumption?t.row.waterConsumption+" ml":"-"))])])]),a("el-col",{attrs:{xs:24,sm:8}},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"detail-label"},[e._v("喜好食物：")]),a("span",{staticClass:"detail-value"},[e._v(e._s(t.row.foodTypes||"-"))])])])],1)]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{prop:"name",label:"昵称","min-width":"100",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"user-info"},[a("el-avatar",{attrs:{size:30,icon:"el-icon-user"}}),a("span",{staticClass:"user-name"},[e._v(e._s(t.row.name))])],1)]}}])}),a("el-table-column",{attrs:{label:"基本信息",align:"center"}},[a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"70",align:"center"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{class:"男"===t.row.gender?"el-icon-male":"el-icon-female",style:{color:"男"===t.row.gender?"#409EFF":"#F56C6C",fontSize:"18px"}}),e._v(" "+e._s(t.row.gender)+" ")]}}])})],1),a("el-table-column",{attrs:{label:"身体指标",align:"center"}},[a("el-table-column",{attrs:{prop:"height",label:"身高",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"身高: "+t.row.height+" cm",placement:"top",effect:"light"}},[a("span",[e._v(e._s(t.row.height)+" cm")])])]}}])}),a("el-table-column",{attrs:{prop:"weight",label:"体重",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"体重: "+t.row.weight+" kg",placement:"top",effect:"light"}},[a("span",[e._v(e._s(t.row.weight)+" kg")])])]}}])}),a("el-table-column",{attrs:{prop:"heartRate",label:"心率",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"心率: "+t.row.heartRate+" 次/分",placement:"top",effect:"light"}},[a("span",[e._v(e._s(t.row.heartRate||"-")+" "),t.row.heartRate?a("small",[e._v("次/分")]):e._e()])])]}}])})],1),a("el-table-column",{attrs:{label:"生活习惯",align:"center"}},[a("el-table-column",{attrs:{prop:"sleepDuration",label:"睡眠时长",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sleepDuration||"-")+" "),t.row.sleepDuration?a("small",[e._v("h")]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"sleepQuality",label:"睡眠质量",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getSleepQualityType(t.row.sleepQuality),effect:"light",size:"small"}},[e._v(" "+e._s(e.getSleepQualityText(t.row.sleepQuality))+" ")])]}}])})],1),a("el-table-column",{attrs:{label:"健康习惯",align:"center"}},[a("el-table-column",{attrs:{prop:"smoking",label:"吸烟",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.smoking?"danger":"success",effect:"plain",size:"small"}},[e._v(" "+e._s(t.row.smoking?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"drinking",label:"饮酒",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.drinking?"danger":"success",effect:"plain",size:"small"}},[e._v(" "+e._s(t.row.drinking?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"exercise",label:"运动",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.exercise?"success":"danger",effect:"plain",size:"small"}},[e._v(" "+e._s(t.row.exercise?"是":"否")+" ")])]}}])})],1),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return e.openEditUi(t.row.id)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return e.deleteBody(t.row)}}})],1)]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,30],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"body-dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth,fullscreen:e.isMobile,top:"5vh","destroy-on-close":"","close-on-click-modal":!1},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"bodyFormRef",staticClass:"body-form",attrs:{model:e.bodyForm,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"form-section"},[a("h3",{staticClass:"section-title"},[e._v("基本信息")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"昵称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户昵称","prefix-icon":"el-icon-user"},model:{value:e.bodyForm.name,callback:function(t){e.$set(e.bodyForm,"name",t)},expression:"bodyForm.name"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:120,"controls-position":"right"},model:{value:e.bodyForm.age,callback:function(t){e.$set(e.bodyForm,"age",t)},expression:"bodyForm.age"}})],1)],1)],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.bodyForm.gender,callback:function(t){e.$set(e.bodyForm,"gender",t)},expression:"bodyForm.gender"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)],1),a("div",{staticClass:"form-section"},[a("h3",{staticClass:"section-title"},[e._v("身体指标")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"身高",prop:"height"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.height,callback:function(t){e.$set(e.bodyForm,"height",t)},expression:"bodyForm.height"}},[a("template",{slot:"append"},[e._v("cm")])],2)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"体重",prop:"weight"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.weight,callback:function(t){e.$set(e.bodyForm,"weight",t)},expression:"bodyForm.weight"}},[a("template",{slot:"append"},[e._v("kg")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血糖",prop:"bloodSugar"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入血糖指标"},model:{value:e.bodyForm.bloodSugar,callback:function(t){e.$set(e.bodyForm,"bloodSugar",t)},expression:"bodyForm.bloodSugar"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血压",prop:"bloodPressure"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"例如: 120/80 mmHg"},model:{value:e.bodyForm.bloodPressure,callback:function(t){e.$set(e.bodyForm,"bloodPressure",t)},expression:"bodyForm.bloodPressure"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"血脂",prop:"bloodLipid"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入血脂指标"},model:{value:e.bodyForm.bloodLipid,callback:function(t){e.$set(e.bodyForm,"bloodLipid",t)},expression:"bodyForm.bloodLipid"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"心率",prop:"heartRate"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.heartRate,callback:function(t){e.$set(e.bodyForm,"heartRate",t)},expression:"bodyForm.heartRate"}},[a("template",{slot:"append"},[e._v("次/分")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"视力",prop:"vision"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"例如: 5.0/5.0"},model:{value:e.bodyForm.vision,callback:function(t){e.$set(e.bodyForm,"vision",t)},expression:"bodyForm.vision"}})],1)],1)],1)],1),a("div",{staticClass:"form-section"},[a("h3",{staticClass:"section-title"},[e._v("生活习惯")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠时长",prop:"sleepDuration"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.sleepDuration,callback:function(t){e.$set(e.bodyForm,"sleepDuration",t)},expression:"bodyForm.sleepDuration"}},[a("template",{slot:"append"},[e._v("h")])],2)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"睡眠质量",prop:"sleepQuality"}},[a("el-radio-group",{model:{value:e.bodyForm.sleepQuality,callback:function(t){e.$set(e.bodyForm,"sleepQuality",t)},expression:"bodyForm.sleepQuality"}},[a("el-radio",{attrs:{label:1,value:1}},[e._v("好")]),a("el-radio",{attrs:{label:2,value:2}},[e._v("一般")]),a("el-radio",{attrs:{label:3,value:3}},[e._v("差")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否吸烟",prop:"smoking"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"是","inactive-text":"否"},model:{value:e.bodyForm.smoking,callback:function(t){e.$set(e.bodyForm,"smoking",t)},expression:"bodyForm.smoking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否饮酒",prop:"drinking"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"是","inactive-text":"否"},model:{value:e.bodyForm.drinking,callback:function(t){e.$set(e.bodyForm,"drinking",t)},expression:"bodyForm.drinking"}})],1)],1),a("el-col",{attrs:{xs:24,sm:8}},[a("el-form-item",{attrs:{label:"是否运动",prop:"exercise"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.bodyForm.exercise,callback:function(t){e.$set(e.bodyForm,"exercise",t)},expression:"bodyForm.exercise"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"喜好食物",prop:"foodTypes"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择摄入较多的食物种类"},model:{value:e.bodyForm.foodTypes,callback:function(t){e.$set(e.bodyForm,"foodTypes",t)},expression:"bodyForm.foodTypes"}},[a("el-option",{attrs:{label:"蔬菜",value:"蔬菜"}}),a("el-option",{attrs:{label:"水果",value:"水果"}}),a("el-option",{attrs:{label:"肉类",value:"肉类"}}),a("el-option",{attrs:{label:"鱼类",value:"鱼类"}}),a("el-option",{attrs:{label:"豆类",value:"豆类"}}),a("el-option",{attrs:{label:"谷物",value:"谷物"}})],1)],1)],1),a("el-col",{attrs:{xs:24,sm:12}},[a("el-form-item",{attrs:{label:"饮水量",prop:"waterConsumption"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.bodyForm.waterConsumption,callback:function(t){e.$set(e.bodyForm,"waterConsumption",t)},expression:"bodyForm.waterConsumption"}},[a("template",{slot:"append"},[e._v("ml")])],2)],1)],1)],1)],1),a("div",{staticClass:"form-tips"},[a("i",{staticClass:"el-icon-info"}),a("span",[e._v("请填写准确的身体数据，以便系统提供更精准的健康建议")])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.updateBody}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[e._v("用户身体数据管理")]),a("p",{staticClass:"page-description"},[e._v("管理用户的身体健康数据，包括身高、体重、血压、血糖等各项指标")])])}],r=(a("99af"),a("4de4"),a("b0c0"),a("d3b7"),a("4d90"),a("498a"),a("70d8")),o={data:function(){return{bodyForm:{},bodyList:[],isMobile:!1,listLoading:!1,saveLoading:!1,dialogFormVisible:!1,title:"",total:0,searchModel:{name:"",id:"",pageNo:1,pageSize:10},rules:{name:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",message:"年龄必须为数字",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],height:[{required:!0,message:"请输入身高",trigger:"blur"}],weight:[{required:!0,message:"请输入体重",trigger:"blur"}]}}},computed:{dialogWidth:function(){return this.isMobile?"95%":"65%"}},methods:{checkWindowSize:function(){this.isMobile=window.innerWidth<768},resetSearch:function(){this.searchModel={name:"",id:"",gender:"",healthStatus:"",pageNo:1,pageSize:10},this.getBodyList()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.smoking||t.drinking||3===t.sleepQuality?"warning-row":t.exercise?"success-row":""},getHealthStatus:function(e){return e.smoking||e.drinking||3===e.sleepQuality?"danger":e.exercise&&2!==e.sleepQuality?"success":"warning"},updateBody:function(){var e=this;this.saveLoading=!0,this.$refs.bodyFormRef.validate((function(t){if(!t)return e.$message.warning("请填写必要的信息"),e.saveLoading=!1,!1;r["a"].updateBody(e.bodyForm).then((function(t){e.$message({message:t.message||"保存成功",type:"success"}),e.dialogFormVisible=!1,e.getBodyList(),e.saveLoading=!1})).catch((function(t){e.$message.error("保存失败: "+(t.message||"未知错误")),e.saveLoading=!1}))}))},clearForm:function(){var e=this;this.bodyForm={},this.$nextTick((function(){e.$refs.bodyFormRef&&e.$refs.bodyFormRef.clearValidate()}))},handleSizeChange:function(e){this.searchModel.pageSize=e,this.getBodyList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getBodyList()},getBodyList:function(){var e=this;this.listLoading=!0;var t={pageNo:this.searchModel.pageNo,pageSize:this.searchModel.pageSize};this.searchModel.name&&(t.name=this.searchModel.name.trim()),this.searchModel.id&&(t.id=this.searchModel.id.trim()),r["a"].getBodyList(t).then((function(t){var a=t.data.rows;e.searchModel.gender&&(a=a.filter((function(t){return t.gender===e.searchModel.gender}))),e.searchModel.healthStatus&&(a=a.filter((function(t){var a=e.getHealthStatus(t);return"good"===e.searchModel.healthStatus?"success"===a:"normal"===e.searchModel.healthStatus?"warning"===a:"warning"!==e.searchModel.healthStatus||"danger"===a}))),e.bodyList=a,e.total=a.length,e.listLoading=!1})).catch((function(t){e.$message.error("获取数据失败: "+(t.message||"未知错误")),e.listLoading=!1}))},openEditUi:function(e){var t=this;this.title="修改身体信息",this.listLoading=!0,r["a"].getBodyById(e).then((function(e){var a=e.data;void 0!==a.sleepQuality&&(a.sleepQuality=parseInt(a.sleepQuality,10)||2),a.smoking=!!a.smoking,a.drinking=!!a.drinking,a.exercise=!!a.exercise,t.bodyForm=a,t.dialogFormVisible=!0,t.listLoading=!1})).catch((function(e){t.$message.error("获取数据失败: "+(e.message||"未知错误")),t.listLoading=!1}))},openAddUi:function(){this.title="添加身体信息",this.bodyForm={gender:"男",sleepQuality:2,smoking:!1,drinking:!1,exercise:!1},this.dialogFormVisible=!0},deleteBody:function(e){var t=this;this.$confirm("确认删除 ".concat(e.name||"ID: "+e.id," 的身体信息吗？"),"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.listLoading=!0,r["a"].deleteBodyById(e.id).then((function(e){t.$message({type:"success",message:e.message||"删除成功",duration:2e3}),t.getBodyList()})).catch((function(e){t.$message.error("删除失败: "+(e.message||"未知错误")),t.listLoading=!1}))})).catch((function(){t.$message({type:"info",message:"已取消删除操作"})}))},formatDate:function(e){if(!e)return"-";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},getSleepQualityType:function(e){var t=parseInt(e,10);return 1===t?"success":2===t?"warning":"danger"},getSleepQualityText:function(e){var t=parseInt(e,10);return 1===t?"好":2===t?"一般":"差"}},created:function(){this.getBodyList(),this.checkWindowSize()},mounted:function(){window.addEventListener("resize",this.checkWindowSize)},beforeDestroy:function(){window.removeEventListener("resize",this.checkWindowSize)}},n=o,l=(a("a17b"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"e073e290",null);t["default"]=c.exports},edc3:function(e,t,a){},f7ae:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-manage-container"},[e._m(0),a("el-card",{staticClass:"search-card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20,type:"flex",align:"middle",justify:"space-between"}},[a("el-col",{attrs:{xs:24,sm:16,md:18,lg:18}},[a("div",{staticClass:"search-controls"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"输入角色名称搜索","prefix-icon":"el-icon-search",clearable:"",size:"medium"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getRoleList(t)}},model:{value:e.searchModel.roleName,callback:function(t){e.$set(e.searchModel,"roleName","string"===typeof t?t.trim():t)},expression:"searchModel.roleName"}}),a("el-button",{attrs:{type:"primary",loading:e.listLoading,size:"medium"},on:{click:e.getRoleList}},[e._v("查询")]),a("el-button",{attrs:{plain:"",icon:"el-icon-refresh",size:"medium"},on:{click:e.resetSearch}},[e._v("重置")])],1)]),a("el-col",{staticClass:"action-col",attrs:{xs:24,sm:8,md:6,lg:6}},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("新增角色")])],1)],1)],1),a("el-card",{staticClass:"data-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("角色列表")]),a("span",{staticClass:"data-count"},[e._v("共 "+e._s(e.total)+" 条记录")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.roleList,stripe:"","element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","header-cell-style":{backgroundColor:"#f5f7fa",color:"#606266",fontWeight:"bold"},"row-class-name":e.tableRowClassName,"empty-text":"暂无数据"}},[a("el-table-column",{attrs:{prop:"roleId",label:"角色ID",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-tag",{attrs:{size:"medium",effect:"plain",type:"primary"}},[e._v(e._s(s.roleName))])]}}])}),a("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述","min-width":"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-tooltip",{attrs:{content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(t){return e.openEditUi(s.roleId)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.deleteRole(s)}}})],1)]}}])}),a("template",{slot:"empty"},[a("div",{staticClass:"empty-data"},[a("i",{staticClass:"el-icon-user-solid"}),a("p",[e._v("暂无角色数据")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openEditUi(null)}}},[e._v("添加第一个角色")])],1)])],2)],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{"current-page":e.searchModel.pageNo,"page-sizes":[5,10,20,50],"page-size":e.searchModel.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:!0,small:e.isMobile},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"role-dialog",attrs:{title:e.title,visible:e.dialogFormVisible,width:e.dialogWidth,fullscreen:e.isMobile,top:"5vh","destroy-on-close":"","close-on-click-modal":!1},on:{close:e.clearForm,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"roleFormRef",staticClass:"role-form",attrs:{model:e.roleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入角色名称",maxlength:"50","show-word-limit":""},model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:2,placeholder:"请输入角色描述",maxlength:"200","show-word-limit":""},model:{value:e.roleForm.roleDesc,callback:function(t){e.$set(e.roleForm,"roleDesc",t)},expression:"roleForm.roleDesc"}})],1),a("el-form-item",{attrs:{label:"权限设置",prop:"menuIdList"}},[a("div",{staticClass:"tree-container"},[a("div",{staticClass:"tree-header"},[a("span",[e._v("请选择此角色所拥有的权限")]),a("div",{staticClass:"tree-actions"},[a("el-checkbox",{attrs:{size:"medium"},on:{change:e.toggleSelectAll},model:{value:e.isAllSelected,callback:function(t){e.isAllSelected=t},expression:"isAllSelected"}},[e._v(" "+e._s(e.isAllSelected?"取消全选":"全选")+" ")])],1)]),a("el-tree",{ref:"menuRef",staticClass:"permission-tree",attrs:{data:e.menuList,props:e.defaultProps,"show-checkbox":"","node-key":"menuId","default-expand-all":"","default-checked-keys":e.roleForm.menuIdList}})],1)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveRole}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[e._v("角色权限管理")]),a("p",{staticClass:"page-description"},[e._v("管理系统角色及其对应的权限设置，包括新增、编辑和删除角色")])])}],r=a("5530"),o=a("2909"),n=a("c7eb"),l=a("1da1"),c=(a("99af"),a("d3b7"),a("159b"),a("67d5")),d=a("b775"),u={getAllMenu:function(){return Object(d["a"])({url:"/menu",method:"get"})}},p={name:"RoleManagement",data:function(){var e=function(e,t,a){return t?t.length<2||t.length>20?a(new Error("长度需要在 2 到 20 个字符")):void a():a(new Error("请输入角色名"))},t=function(e,t,a){return t?t.length<2||t.length>20?a(new Error("长度需要在 2 到 20 个字符")):void a():a(new Error("请输入角色描述"))};return{isMobile:!1,listLoading:!1,saveLoading:!1,menuList:[],roleForm:{roleId:null,roleName:"",roleDesc:"",menuIdList:[]},dialogFormVisible:!1,title:"",total:0,roleList:[],isAllSelected:!1,defaultProps:{children:"children",label:"title"},searchModel:{roleName:"",pageNo:1,pageSize:10},rules:{roleName:[{validator:e,trigger:"blur"}],roleDesc:[{validator:t,trigger:"blur"}]}}},computed:{dialogWidth:function(){return this.isMobile?"95%":"50%"}},methods:{checkScreenWidth:function(){this.isMobile=window.innerWidth<768},getAllMenu:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.getAllMenu();case 3:a=t.sent,e.menuList=a.data,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("获取菜单列表失败:",t.t0),e.$message.error("获取菜单权限数据失败");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveRole:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a,s,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.roleFormRef.validate();case 3:return a=e.$refs.menuRef.getCheckedKeys(),s=e.$refs.menuRef.getHalfCheckedKeys(),e.roleForm.menuIdList=[].concat(Object(o["a"])(a),Object(o["a"])(s)),e.saveLoading=!0,t.next=9,c["a"].saveRole(e.roleForm);case 9:i=t.sent,e.$message({message:i.message||(e.roleForm.roleId?"修改成功":"新增成功"),type:"success"}),e.dialogFormVisible=!1,e.getRoleList(),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),!1===t.t0?console.log("表单验证失败"):(console.error("保存角色失败:",t.t0),e.$message.error("操作失败，请稍后重试"));case 18:return t.prev=18,e.saveLoading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,15,18,21]])})))()},toggleSelectAll:function(e){if(this.$refs.menuRef)if(e){if(this.menuList.length>0){var t=this.getAllMenuIds(this.menuList);this.$refs.menuRef.setCheckedKeys(t)}}else this.$refs.menuRef.setCheckedKeys([])},getAllMenuIds:function(e){var t=this,a=[];return e&&0!==e.length?(e.forEach((function(e){e.menuId&&a.push(e.menuId),e.children&&e.children.length>0&&(a=a.concat(t.getAllMenuIds(e.children)))})),a):a},clearForm:function(){this.roleForm={roleId:null,roleName:"",roleDesc:"",menuIdList:[]},this.isAllSelected=!1},handleSizeChange:function(e){this.searchModel.pageSize=e,this.searchModel.pageNo=1,this.getRoleList()},handleCurrentChange:function(e){this.searchModel.pageNo=e,this.getRoleList()},getRoleList:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,c["a"].getRoleList(e.searchModel);case 4:a=t.sent,e.roleList=a.data.rows,e.total=a.data.total,t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("获取角色列表失败:",t.t0),e.$message.error("获取角色列表失败"),e.roleList=[],e.total=0;case 15:return t.prev=15,e.listLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,9,15,18]])})))()},openEditUi:function(e){var t=this;return Object(l["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.menuList.length){a.next=3;break}return a.next=3,t.getAllMenu();case 3:if(null!=e){a.next=9;break}t.title="新增角色",t.roleForm={roleId:null,roleName:"",roleDesc:"",menuIdList:[]},t.dialogFormVisible=!0,a.next=23;break;case 9:return t.title="修改角色",a.prev=10,a.next=13,c["a"].getRoleById(e);case 13:s=a.sent,t.roleForm=Object(r["a"])({},s.data),t.dialogFormVisible=!0,t.$nextTick((function(){if(t.$refs.menuRef&&s.data.menuIdList&&(t.$refs.menuRef.setCheckedKeys(s.data.menuIdList),t.menuList.length>0)){var e=t.getAllMenuIds(t.menuList);t.isAllSelected=s.data.menuIdList.length===e.length}})),a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](10),console.error("获取角色详情失败:",a.t0),t.$message.error("获取角色详情失败");case 23:case"end":return a.stop()}}),a,null,[[10,19]])})))()},deleteRole:function(e){var t=this;return Object(l["a"])(Object(n["a"])().mark((function a(){var s;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm('确认删除角色 "'.concat(e.roleName,'" 吗？'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"});case 3:return t.listLoading=!0,a.prev=4,a.next=7,c["a"].deleteRoleById(e.roleId);case 7:s=a.sent,t.$message({type:"success",message:s.message||"删除成功"}),t.getRoleList(),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](4),console.error("删除角色失败:",a.t0),t.$message.error("删除失败");case 16:return a.prev=16,t.listLoading=!1,a.finish(16);case 19:a.next=24;break;case 21:a.prev=21,a.t1=a["catch"](0),t.$message({type:"info",message:"已取消删除"});case 24:case"end":return a.stop()}}),a,null,[[0,21],[4,12,16,19]])})))()}},created:function(){this.checkScreenWidth(),window.addEventListener("resize",this.checkScreenWidth),this.getRoleList(),this.getAllMenu()},beforeDestroy:function(){window.removeEventListener("resize",this.checkScreenWidth)}},m=p,f=(a("9b2f"),a("2877")),h=Object(f["a"])(m,s,i,!1,null,"7623cb14",null);t["default"]=h.exports},feca:function(e,t,a){var s={"./404.vue":"8cdb","./Change_Password/Change_Password.vue":"bd9e4","./dashboard/index.vue":"9406","./health/ai-qa.vue":"538b","./health/assessment.vue":"79ca","./health/info-upload.vue":"02ee","./health/knowledge-view.vue":"0891","./health/log.vue":"cbb5","./login/index.vue":"9ed6","./register/register.vue":"0c99","./sys/knowledge-manage.vue":"bd5b","./sys/role.vue":"f7ae","./sys/sport-item-manage.vue":"8235","./sys/user-health-manage.vue":"ea4d","./sys/user.vue":"e7ed"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="feca"},ff08:function(e,t,a){"use strict";a("edc3")}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);